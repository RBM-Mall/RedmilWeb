@model IEnumerable<Project_Redmil_MVC.Models.ResponseModel.AepsKycDetailsNewResponseModel>

@using Project_Redmil_MVC
@{
    ViewData["Title"] = "Aadhaar ATM";
    Layout = "~/Pages/Shared/_LayoutMaster.cshtml";
}
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

@*<link href="~/ResponsiveCSS/Aeps.css" rel="stylesheet" />*@
<link rel="stylesheet" href="~/servicesCSS/prepaidrecharge.css" />
<link href="~/ResponsiveCSS/Index.css" rel="stylesheet" />
<link rel="stylesheet" href="~/css/businessReport.css" />
<link href="~/css/transfertobankcss/transfertobankcss.css" rel="stylesheet" />
<link href="~/ResponsiveCSS/ServicesNavigation.css" rel="stylesheet" />
<link rel="stylesheet" href="~/css/navbarheader.css">
<script src="https://nightly.datatables.net/js/jquery.dataTables.js"></script>


<!-- SEARCHPANES -->
<link href="https://cdn.datatables.net/searchpanes/2.0.1/css/searchPanes.dataTables.css" rel="stylesheet"
      type="text/css" />
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/searchpanes/1.3.0/js/dataTables.searchPanes.min.js"></script>
<script src="https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min.js"></script>

<style>
    .col-spaced {
        margin-left: 15px;
        margin-right: 10px;
    }
</style>
<br />
<input type="text" style="display:none" value="26" id="SlefHelpElement">
<div class="row">
    <div class="container-fluid" style="background:#ebebeb">
        <div class="first-header">
            <div class="section background-image heading_page">
                <div class="container ">
                    <div class="row">
                        <div class="col-sm-12 text-center">
                            <ul>
                                <li><strong class="heading_page_2">AADHAAR ATM</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <div class="container" style="background-color:white;">
            <div class="row formedia">
                <div class="col-md-3 col-lg-3 col-sm-3">
                    <img src="~/css/Img_DMT2/Img_Cash.jpeg" class="img-width" style="height:100px;width:120px;">
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-sm-3">
                    <p class="aval_bal aval_bal_font"><b>Cash Wallet</b></p>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-sm-3">
                    <p class="aval_bal aval_bal_font"><b>Available Balance: <label id="lblBalance">₹ @ViewBag.Balance</label></b></p>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-sm-3">
                    <p class="aval_bal aval_bal_font"><button class="button-27" onclick="document.location.href='/Passbook/TranferToBank';"> ADD MONEY</button></p>
                </div>
            </div>
        </div>

        @*<div class="row">
        <div class="passbooktabs">
        <div class="col-md-4">
        @*<button class="tablinks" style="margin-left: 150px;" onclick="openPassbook(event,'AadharATM')" id="defaultOpen">AADHAR ATM</button>
        <button class="tablinks" onclick="openPassbook(event,'AadharATM')" id="defaultOpen">AADHAR ATM</button>
        </div>
        <div class="col-md-4">
        @*<button class="tablinks" style="margin-left: 150px;" onclick="openPassbook(event,'Commission')">COMMISSION</button>
        <button class="tablinks" onclick="openPassbook(event,'Commission')">COMMISSION</button>
        </div>
        <div class="col-md-4">
        @*<button class="tablinks" style="margin-left: 150px;" onclick="openPassbook(event,'HowToWork')">HOW TO WORK</button>
        <button class="tablinks" onclick="openPassbook(event,'HowToWork')">HOW TO WORK</button>
        </div>
        </div>
        </div>*@
    </div>
    <!--Heading-->
    <br />
    <br />
    <br />
    <br />
    <div class="container-fluid">
        <div class="section single-services-area">
            <div class="row" style="margin-right: 0;">
                <div class="col col-md-12 col-sm-12 col-lg-12">
                    <img src="/img/img_devices/harbhajan-Banner.png" style="width:100%;" alt="Norway" />
                </div>
            </div>
        </div>
    </div>
    <br />
    <br />
    <br />
    <!--Heading New-->

    <div class="container">
        <div class="row">
            <div class="col-sm-12 text-center padding-bottom-30">
                <div class="section-title section_title">
                    <h1 class="heading_services"><span>AEPS</span></h1>
                </div>
            </div>
        </div>
    </div>

    <br />
    <br />
    <br />
    <br />

    <!--Choose Transaction Type Popup-->

    <div class="section services-area padding-top-bottom-60">
        <div class="container">
            <h1 class="transaction center heading_chooseTransaction">CHOOSE TRANSACTION</h1>
            <div class="row rowaepsChooseTrasaction" id="aepsChooseTrasaction">
                <div class="col-md-4 col-sm-4 col-4 col-xs-4 divrowaepsChooseTrasaction">
                    <div class="col-spaced">
                        <div class="wallet-box bg-wt-round radio1 div_radio" type="radio" id="cashWithdrawal">
                            <div class="inner">
                                <div class="advantage-images">
                                    <img src="/img/img_devices/CASH.png" class="img-responsive" alt="Cash Withdrawal" title="Cash Withdrawal">
                                </div>
                                <input type="radio" class="radio1" name="test" id="rdbcashWithdrawal" value="Cash Withdrawal"><b class="inner_radio">CASH WITHDRAWAL</b><!--0 For True and 1 for False-->
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-4 col-sm-4 col-4 col-xs-4 divrowaepsChooseTrasaction">
                    <div class="col-spaced">
                        <div class="wallet-box bg-wt-round radio1 div_radio" type="radio" id="cashWithdrawal">
                            <div class="inner">
                                <div class="advantage-images">
                                    <img src="/img/img_devices/BALANCE.png" class="img-responsive" alt="Balance Enquiry" title="Balance Enquiry">
                                </div>
                                <input type="radio" class="radio1" name="test" id="rdbbalanceEnquiry" value="Balance Enquiry"><b class="inner_radio">BALANCE ENQUIRY</b><!--0 For True and 1 for False-->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-4 col-4 col-xs-4 divrowaepsChooseTrasaction">
                    <div class="col-spaced">
                        <div class="wallet-box bg-wt-round radio1 div_radio" type="radio" id="cashWithdrawal">
                            <div class="radio1" type="radio" id="balanceEnquiry">
                                <div class="inner">
                                    <div class="advantage-images">
                                        <img src="/img/img_devices/MINI-STATEMENT.png" class="img-responsive" alt="Mini Statement" title="Mini Statement">
                                    </div>
                                    <input type="radio" class="radio1" name="test" id="rdbminiStatement" value="Mini Statement"><b class="inner_radio">MINI STATEMENT</b><!--0 For True and 1 for False-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12" style="text-align:center;">
                    <h3><span id="walletMode" style="font-weight:bold;" class="text-danger font-weight-bold"></span></h3>
                </div>
            </div>
            <div style="text-align:center">
                <button class="button-21" style="font-weight: 900;" onclick="CheckKYCStatus(0)" id="btnTransaction">Proceed</button>
            </div>
        </div>
    </div>


    @*-----------------------------------------------KYC Status Pending For User Modal Popup---------------------------------------------------------*@

    <input type="button" id="btnKycPending" data-target="#kycPendingModal" data-toggle="modal" style="display:none" />
    <div class="modal fade" id="kycPendingModal" role="dialog" style="margin-top: 100px;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" id="headingKYCStatus" style="font-weight: 900; text-align: center;"></h4>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="container">
                            <div class="row">
                                <div class="col-md-10" style="text-align:center;">
                                    <img id="img_kycPendingBank" />
                                </div>
                            </div>
                        </div>
                        <p style="color: #2d385e; font-weight: 900; font-size: 20px; text-align: center;" id="lblBankName"></p>
                        <p style="color: #2d385e; font-weight: 800; font-size: 15px; text-align: center; margin-top: 20px;">
                            Your E-KYC for
                            <label id="lblBankName1">
                            </label>
                            is Pending!!!
                        </p>
                    </div>
                </div>
                <br />

                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">

                                @*This will hit for Proceeding KYC...*@
                                <button type="button" id="btnProceedToKyc" onclick="proceedToKyc()" class="button-27">Proceed To Kyc</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="btnDoItLater" onclick="CheckKYCStatus(1)" class="button-27">Do It Later</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @*-----------------------------------------------Aeps AgentICICI Bank Onboarding Modal Popup for KYC Status---------------------------------------------------------*@
    <input type="button" id="btnagentOnboarding" data-target="#agentOnboarding" data-toggle="modal" style="display:none;" />
    <div class="modal fade modal_choose_bank" id="agentOnboarding" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">KYC Required !!!</h4>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="container">
                            <div class="row">
                                <div class="col-md-10" style="text-align:center;">
                                    <img src="~/css/ImgAepsOnbaording/onboardingUserLogo.jpeg" />
                                </div>
                                <br />
                                <div class="col-md-10" style="text-align:center">
                                    <img src="~/css/ImgAepsOnbaording/onboardingBanklogo.jpeg" />
                                </div>
                            </div>
                        </div>
                        <p style="color: #2d385e; font-weight: 900; font-size: 20px; text-align: center;">
                            Your ICICI E-KYC is pending!
                        </p>
                        <p style="color: #2d385e; font-weight: 800; font-size: 15px; text-align: center; margin-top: 20px;">
                            To use Aeps, Micro ATM and Cash Collection service, your E-KYC is mandatory. <br />
                            It just take one minute of yours and a finger print scanner.
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="btnProceedForEKYC2" onclick="proceedForEKYC2()" class="button-27">Proceed for E-KYC</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="btn btn-danger">LATER</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @*-----------------------------------------------Aeps AgentICICI Bank Onboarding Modal Popup for Mobile OTP Validation--------------------------------------------------------*@
    <input type="button" id="btnmobileOtpValidation" data-target="#mobileOtpValidation" data-toggle="modal" style="display:none;" />
    <div class="modal fade modal_choose_bank" id="mobileOtpValidation" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">OTP Verification</h4>
                </div>
                <div class="modal-body">
                    <div>
                        <p style="color: #2d385e; font-weight: 900; font-size: 20px; text-align: center;">
                            One time OTP has been sent
                        </p>
                        <p style="color: #2d385e; font-weight: 800; font-size: 15px; text-align: center; margin-top: 20px;">
                            Mobile No.:@ViewBag.MobileNo
                        </p>
                        <div class="container">

                            <div class="row">
                                <div class="col col-lg-12 col-sm-12">
                                    <div class="col col-lg-3">
                                    </div>
                                    <div class="col col-lg-4">
                                        <input type="text" class="form-control" maxlength="7" id="txtOTPVerifyForKYC" placeholder="Enter OTP" />
                                        <span id="errtxtOTPVerifyForKYC" class="errorMsg"></span>
                                    </div>
                                    <div class="col col-lg-4">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="btnmobileOtpValidationForKYC" onclick="mobileOtpValidationForKYC()" class="button-27">Verify OTP</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="btn btn-danger">LATER</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Choose Device Model Popup-->
    @*--------------------------------------------------------Aeps AgentICICI Bank Onboarding Modal Popup for Choose Biometric Device modal pop-up ------------------------------------------------------------------*@

    <input type="button" id="btniciciAgentBiometric" data-target="#iciciAgentBiometric" data-toggle="modal" style="display:none" />
    <div class="modal fade modal_choose_bank" id="iciciAgentBiometric" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">SELECT DEVICE</h4>
                    <div class="col-sm-5 col-xs-12 pull-right">
                        <div class="read-more padding-top-bottom-40">
                            <h3 class="heading_Balance" style="color: #fff; display: inline-flex;font-size: 16px;">Cash Wallet -- </h3>
                            <a href="#" target="_blank" class="button-22" style="cursor: auto; text-decoration: unset;">₹ @ViewBag.Balance </a>
                        </div>
                    </div>
                </div>
                <div class="modal-body" id="1selectDevice">
                    <p class="p_Verify_Face">How to Work</p>
                    <hr />
                    <div class="col-md-12">
                        <div class="section single-services-area">
                            <div class="row" style="margin-right: 0;">
                                <div class="col col-md-12 col-sm-12 col-lg-12">
                                    <img src="~/img/img_devices/How-to-Work.png" style="width:100%;" alt="Norway" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="p_Verify_Face">CHOOSE DEVICE</p>
                    <hr />
                    <div class="col-md-12">
                        <div class="col-md-3 morpho radio2 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Morpho">
                            <img src="~/img/img_devices/Morpho.png" class="choose_device_image" />
                            <label class="choose_device_label"> MORPHO </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Startek">
                            <img src="~/img/img_devices/Startek.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="startek"> STARTEK </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Mantra">
                            <img src="~/img/img_devices/Mantra.png" class="choose_device_image" />
                            <label class="ybl choose_device_label"> MANTRA </label>
                        </div>
                    </div>
                    <div class="col-md-12" style="display: block; margin-top: 20px;">
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Next">
                            <img src="~/img/img_devices/Next.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="nextNb"> NEXT NB-3023 </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Secugen">
                            <img src="~/img/img_devices/Secugen.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="secugen"> SECUGEN PRO 20 </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Tatvik">
                            <img src="~/img/img_devices/Tatvik-TMF20.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="tatvik"> TATVIK TMF20 </label>
                        </div>
                    </div>
                    <div class="col-md-12" style="display: block; margin-top: 20px;">
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho1" name="radioDeviceNew" value="Precision">
                            <img src="~/img/img_devices/Precision.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="precision"> PRECISION PB510 </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12" style="text-align:center;">
                            <h3 style="font-weight:bold"><span id="errDevice" style="font-weight:bold;" class="text-danger font-weight-bold"></span></h3>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="selectICICIAgentDeviceProceed" onclick="iciciAgentBiometricDeviceSelection()" class="button-27">Proceed</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="btn btn-danger">Cancel</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col col-md-12 col-sm-12 col-lg-12">
                    <div class="div-main-oplist" style="padding:0px 0px 0px 0px;margin-top:30px;">
                        <div class="div-recharge-opimage">
                            <div class="div-oprator-heading"><h4 class="heading_tag_bbps"><b>Powered By</b></h4></div>
                            <hr />
                            <div class="row" style="text-align:center;">
                                <div class="col-md-4"></div>
                                <div class="col-md-4 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                    <img src="~/img/img_devices/NPCI.png" alt="NPCI" class="img-width" style="height:100px;">
                                    <div class="overlay"> <a href="#" target="_blank" class="icon" title="NPCI"></a></div>
                                    <div class="leadership_name">
                                        <br />
                                    </div>
                                </div>
                                <div class="col-md-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @*-----------------------------------------------Aeps AgentICICI Bank Onboarding Modal Popup for Show Addhar and Pan--------------------------------------------------------*@
    <input type="button" id="btnagentAadharPanPopu" data-target="#agentAadharPanPopu" data-toggle="modal" style="display:none;" />
    <div class="modal fade modal_choose_bank" id="agentAadharPanPopu" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">Agent E-KYC Details</h4>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="container">
                            <div class="row">
                                <div class="col col-lg-12 col-sm-12">
                                    <div class="col col-lg-3">
                                        <label id="lblAadhar">Aadhar Number:</label>
                                    </div>
                                    <div class="col col-lg-4">
                                        <input type="text" class="form-control" value="@ViewBag.AadharNum" readonly id="txtAgentAadharNum" />
                                    </div>
                                    <div class="col col-lg-4">
                                    </div>
                                </div>
                                <div class="col col-lg-12 col-sm-12">
                                    <div class="col col-lg-3">
                                        <label id="lblAadhar">Pan Number:</label>
                                    </div>
                                    <div class="col col-lg-4">
                                        <input type="text" class="form-control" value="@ViewBag.PanNum" readonly id="txtPanNum" />
                                    </div>
                                    <div class="col col-lg-4">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="btnProceedtoEKYCForAgentICICI" onclick="iciciAgentBiometricFinal()" class="button-27">Proceed to E-KYC</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="btn btn-danger">Cancel</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    @*-----------------------------------------------Aeps AgentICICI Bank Onboarding Modal Popup for Final Response Success or Error--------------------------------------------------------*@
    <input type="button" id="btnagentKYCResponsePopup" data-target="#agentKYCResponsePopup" data-toggle="modal" style="display:none;" />
    <div class="modal fade modal_choose_bank" id="agentKYCResponsePopup" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="container">
                            <div class="row">
                                <div class="col-md-10" style="text-align:center;">
                                    <img id="imgKYCFinalResponseImage" />
                                </div>
                                <br />
                            </div>
                        </div>
                        <p style="color: #2d385e; font-weight: 900; font-size: 20px; text-align: center;" id="agentKYCFinalResponseMessage1">
                        </p>
                        <p style="color: #2d385e; font-weight: 800; font-size: 15px; text-align: center; margin-top: 20px;" id="agentKYCFinalResponseMessage2">

                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-12 col-md-12">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="button-27">Done</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>






    @*-----------------------------------------------Choose Bank Modal Popup for KYC Status Bridge---------------------------------------------------------*@
    <input type="button" id="btnChooseBankKycBridgeModal" data-target="#chooseBankKycBridgeModal" data-toggle="modal" style="display:none;" />
    <div class="modal fade modal_choose_bank" id="chooseBankKycBridgeModal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">Choose Bank</h4>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="hdnTransactionMode" />
                    <hr />
                    <div class="chooseBank">
                        <div class="selectBank" style="border-radius: 1px">
                            <div class="col-md-3 box_choose_bank">
                                <img src="https://api.redmilbusinessmall.com/Docs/yesbank_aeps.png" class="box_choose_bank_image" />
                                <label class="ybl box_choose_bank_label" id="lblybl"> </label>
                                <input type="radio" class="rdbBank" name="rdbBankName" id="rdbYESBank" value="YES Bank" style="text-align: center;" />
                                <b class="box_choose_bank_input_para"></b>
                            </div>
                            <div class="col-md-4 box_choose_bank" style="display:none;">
                                <img src="https://api.redmilbusinessmall.com/OPImg/PaytmNew.png" class="box_choose_bank_image" />
                                <label class="ppb box_choose_bank_label" id="lblppb">  </label>
                                <input type="radio" class="rdbBank" name="rdbBankName" id="rdbPAYTMBank" value="Paytm" style="text-align: center;" />
                                <b class="box_choose_bank_input_para"></b>
                            </div>
                            <div class="col-md-3 box_choose_bank">
                                <img src="https://api.redmilbusinessmall.com/OPImg/IciciNew.png" class="box_choose_bank_image" />
                                <label class="icici box_choose_bank_label" id="lblicici"> </label>
                                <input type="radio" class="rdbBank" name="rdbBankName" id="rdbICICIBank" value="ICICI Bank" style="text-align: center;" />
                                <b class="box_choose_bank_input_para"></b>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12" style="text-align:center;">
                            <h3><span id="errbank" style="font-weight:bold;" class="text-danger font-weight-bold"></span></h3>
                        </div>
                    </div>
                    <div class="col col-md-12 col-sm-12 col-lg-12">
                        <div class="div-main-oplist" style="padding:0px 0px 0px 0px;margin-top:30px;">
                            <div class="div-recharge-opimage">
                                <div class="div-oprator-heading"><h4 class="heading_tag_bbps"><b>Powered By</b></h4></div>
                                <hr />
                                <div class="row" style="text-align:center;">
                                    <div class="col-md-4"></div>
                                    <div class="col-md-4 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                        <img src="~/img/img_devices/Aeps.png" alt="Aeps" class="img-width" style="height:100%;width:100%">
                                        <div class="overlay"> <a href="#" target="_blank" class="icon" title="Aeps"></a></div>
                                        <div class="leadership_name">
                                            <br />
                                        </div>
                                    </div>
                                    <div class="col-md-4"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="btnbankModal" onclick="chooseBank()" class="button-27">Continue</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="btn btn-danger">Close</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!--Choose Device Model Popup-->
    @*-------------------------------------------------------- Choose Device modal pop-up ------------------------------------------------------------------*@

    <input type="button" id="btndeviceModal" data-target="#deviceModal" data-toggle="modal" style="display:none" />
    <div class="modal fade modal_choose_bank" id="deviceModal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">SELECT DEVICE</h4>
                    <div class="col-sm-5 col-xs-12 pull-right">
                        <div class="read-more padding-top-bottom-40">
                            <h3 class="heading_Balance" style="color: #fff; display: inline-flex;font-size: 16px;">Cash Wallet -- </h3>
                            <a href="#" target="_blank" class="button-22" style="cursor: auto; text-decoration: unset;">₹ @ViewBag.Balance </a>
                        </div>
                    </div>
                </div>
                <div class="modal-body" id="1selectDevice">
                    <p class="p_Verify_Face">How to Work</p>
                    <hr />
                    <div class="col-md-12">
                        <div class="section single-services-area">
                            <div class="row" style="margin-right: 0;">
                                <div class="col col-md-12 col-sm-12 col-lg-12">
                                    <img src="~/img/img_devices/How-to-Work.png" style="width:100%;" alt="Norway" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="p_Verify_Face">CHOOSE DEVICE</p>
                    <hr />
                    <input type="hidden" id="hdnTransactionModeDevice" />
                    <input type="hidden" id="hdnTransactionBankDevice" />
                    <div class="col-md-12">
                        <div class="col-md-3 morpho radio2 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Morpho">
                            <img src="~/img/img_devices/Morpho.png" class="choose_device_image" />
                            <label class="choose_device_label"> MORPHO </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Startek">
                            <img src="~/img/img_devices/Startek.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="startek"> STARTEK </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Mantra">
                            <img src="~/img/img_devices/Mantra.png" class="choose_device_image" />
                            <label class="ybl choose_device_label"> MANTRA </label>
                        </div>
                    </div>
                    <div class="col-md-12" style="display: block; margin-top: 20px;">
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Next">
                            <img src="~/img/img_devices/Next.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="nextNb"> NEXT NB-3023 </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Secugen">
                            <img src="~/img/img_devices/Secugen.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="secugen"> SECUGEN PRO 20 </label>
                        </div>
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Tatvik">
                            <img src="~/img/img_devices/Tatvik-TMF20.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="tatvik"> TATVIK TMF20 </label>
                        </div>
                    </div>
                    <div class="col-md-12" style="display: block; margin-top: 20px;">
                        <div class="col-md-3 choose_device_div">
                            <input type="radio" class="morpho" name="radioDevice" value="Precision">
                            <img src="~/img/img_devices/Precision.png" class="choose_device_image" />
                            <label class="ybl choose_device_label" id="precision"> PRECISION PB510 </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12" style="text-align:center;">
                            <h3 style="font-weight:bold"><span id="errDevice" style="font-weight:bold;" class="text-danger font-weight-bold"></span></h3>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12" style="display: inline-flex;">
                            <div class="col-sm-6 col-md-6">
                                <button type="button" id="selectDeviceProceed" onclick="VerifyFaceBiometricModal()" class="button-27">Proceed</button>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href="/Aeps/AEPS" type="button" id="btnClose" class="btn btn-danger">Cancel</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col col-md-12 col-sm-12 col-lg-12">
                    <div class="div-main-oplist" style="padding:0px 0px 0px 0px;margin-top:30px;">
                        <div class="div-recharge-opimage">
                            <div class="div-oprator-heading"><h4 class="heading_tag_bbps"><b>Powered By</b></h4></div>
                            <hr />
                            <div class="row" style="text-align:center;">
                                <div class="col-md-4"></div>
                                <div class="col-md-4 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                    <img src="~/img/img_devices/NPCI.png" alt="NPCI" class="img-width" style="height:100px;">
                                    <div class="overlay"> <a href="#" target="_blank" class="icon" title="NPCI"></a></div>
                                    <div class="leadership_name">
                                        <br />
                                    </div>
                                </div>
                                <div class="col-md-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>







    <!--Choose Verify Face Or Biometric Popup-->
    @*----------------------------------------------- Choose Verify Face or Biometric modal pop-up ---------------------------------------------------------*@

    <input type="button" id="btnVerifyPopup" data-target="#VerifyFaceBiometricModal" data-toggle="modal" style="display:none" />
    <div class="modal fade" id="VerifyFaceBiometricModal" role="dialog" style="margin-top: 100px;">
        @*chooseToVerifyFaceBiometric*@
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">VERIFICATION</h4>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="hdnMode" />
                    <input type="hidden" id="hdnBank" />
                    <input type="hidden" id="hdnDevice" />
                    @*<p class="p_Security">Verify your face OR fingerprint biometric</p>*@
                    <p class="p_Security">Verify your face</p>
                    <hr />
                    <div>

                        <div class="container">
                            <div class="row" style="text-align:center;">
                                <div class="col-md-4"></div>
                                <div class="col-md-4 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                    <img src="../img/device biometric image/fingerprint.jpg" alt="Aeps" class="img-width" style="height:100px;">
                                    <div class="overlay"> <a href="#" target="_blank" class="icon" title="Aeps"></a></div>
                                    <div class="leadership_name">
                                        <br />
                                    </div>
                                </div>
                                <div class="col-md-4"></div>
                            </div>
                        </div>
                        <p class="p_Security">Your Security matters the most to us!</p>
                        <p class="p_Verify">Verify your face as per your KYC records and transact seemlessly for next 24 hours.</p>
                        <input type="hidden" name="long" id="hdnLong" />
                        <input type="hidden" name="lat" id="hdnLat" />
                        @*<div class="col-md-12">
                        <div class="col-md-4 col_Verify">
                        <button class="button-21 btn_Proceed_Final" id="deviceModal" data-toggle="modal" data-target="#deviceModal">
                        Verify Face
                        </button>
                        </div>
                        <div class="col-sm-2 vl vertical_align"></div>
                        <div class="col-md-4 col_Verify">
                        <button class="button-21" id="deviceModal" onclick="getLocation()" style="font-weight: 900; margin-top: 50px;">
                        Verify Using Biometric
                        </button>
                        </div>
                        </div>*@
                    </div>

                </div>
                <div class="modal-footer">

                    <div class="col-md-12">

                        <div class="col-md-12 col-sm-12">
                            <button class="button-27 vfc_modal" id="facedeviceModal" data-dismiss="modal" data-target="#FacedeviceModal" style="" onclick="FaceLiveliness()">
                                Verify Face
                            </button>
                        </div>
                        @*Code Commented For Fingurprint Not Working So that
                        <div class="col-md-6 col-sm-6">
                        <button class="button-27" id="btnVerifyByBiometric" onclick="getLocation()">
                        Verify Using Biometric
                        </button>
                        </div>
                        *@
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Button trigger modal for Open Camera -->
    @*----------------------------------------------- Modal for Clicked Image -----------------------------------------------*@

    <input type="button" id="staticBackdrops" data-target="#staticBackdrop" onclick="openCamera()" data-toggle="modal" style="display:none" />
    <div class="col-sm-12 col-md-12 col-xl-12 col-lg-12">
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="overflow:auto;">
            <div class="modal-dialog">
                <div class="col-sm-12 col-md-12 col-xl-12 col-lg-12">
                    <div class="modal-content modal_top">
                        <div class="modal-header">
                            <button type="button" class="close" id="btnCloseTwo" data-dismiss="modal" onclick="closeconfirm()">&times;</button>
                            @*<h4 id="DetailTitle" class="modal-title text-center theclose">Confirm</h4>*@
                            <h4 id="modal-title" class="modal-title text-center theclose">Confirm</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm-6 col-md-6 col-xl-6 col-lg-6">

                                    <video id="videoElement" class="Video_Camera" autoplay></video>
                                </div>
                                <div class="col-sm-6 col-md-6 col-xl-6 col-lg-6">
                                    <div class="">
                                        <!--FOR THE SNAPSHOT-->
                                        <button id="snapBtn" class="button-21_VideoCamera  Take_Snap">Snap Photo</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @*----------------------------------------------- Modal for Show Clicked Image-----------------------------------------------*@

    <!--For Image-->
    <input type="button" id="staticimages" data-target="#staticimage" data-toggle="modal" style="display:none" />
    <div class="modal fade" id="staticimage" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="overflow:auto;">
        <div class="modal-dialog">
            <div class="col-sm-12 col-md-12 col-xl-12 col-lg-12">
                <div class="modal-content modal_top img_forImage">
                    <div class="modal-header">

                        <button type="button" class="close" id="btnCloseTwo" data-dismiss="modal">&times;</button>

                        <h4 id="DetailTitle" class="modal-title text-center">Verify</h4>
                    </div>
                    <div class="modal-body">

                        <div class="row">
                            <!--FOR THE SNAPSHOT-->
                            <div class="col col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                <canvas id="canvasElement" class="Video_Camera"></canvas>
                            </div>
                            <div class="col col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <div class="col col-sm-4 col-md-4 col-lg-4 col-xl-4">
                                </div>
                                <div class="col col-sm-4 col-md-4 col-lg-4 col-xl-4">
                                    <div class="img_ver">
                                        <button type="button" class="button-21_VideoCameras" data-bs-dismiss="modal" onclick="Veryfyimage()">Verify </button>
                                    </div>
                                </div>
                                <div class="col col-sm-4 col-md-4 col-lg-4 col-xl-4">
                                    <div class="img_veri">
                                        <button type="button" class="button-21_VideoCameras" data-dismiss="modal">Discard</button>
                                        <a href="/Aeps/AEPS" type="button" class="button-21_VideoCameras">Discard</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>









    @*-------------------------------------------- AadharCustomerDetails Pop Up----------------------------------------*@

    <input type="button" id="btnAadharCustomerDetails" data-target="#aadharCustomerDetailsPopUp" data-toggle="modal" style="display:none" />
    <div class="modal fade" id="aadharCustomerDetailsPopUp" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header modal-header-recharge">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="text-align:center;"><b>AADHAAR ATM</b></h4>
                </div>

                <div class="modal-body" style="background-color:white;">
                    <div class="row div-recharge-img">
                        <div class="col-sm-4 custom_img_size pay-img">
                            <img src="/css/Img_Aeps/Logo-for-web.png" class="img-width" style="height:100px;width:120px;">
                        </div>
                        <div class="col-sm-4">
                        </div>
                        <div class="col-sm-4 custom_img_size pay-img2">
                            <img src="~/css/Img_Aeps/NPCI-for-web.png" class="img-width" style="height:100px;width:100px;">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-4"></div>
                        <div class="col-sm-4 custom_img_size" style="text-align: center;">
                            <img id="img_SelectedBank" />
                        </div>
                        <div class="col-sm-4">
                        </div>
                        <input type="hidden" name="long1" id="hdnLong1" />
                        <input type="hidden" name="lat1" id="hdnLat1" />
                    </div>

                    <div class=row>
                        <div class="passbooktabs" style="background-image: linear-gradient(225deg, #003366 0%, #345beb 49%, #5634eb 100%);">
                            <button class="tablinks" style="letter-spacing: 2px;margin-right: 25px;margin-left: 0px;" onclick="openCity(event,'CashWithdrawal')" id="defaultOpen">CASH WITHDRAWAL</button>
                            <button class="tablinks" style="letter-spacing: 2px;margin-right: 25px;margin-left: 0px;" onclick="openCity(event,'BalanceEnquiry')">BALANCE ENQUIRY</button>
                            <button class="tablinks" style="letter-spacing: 2px;margin-right: 25px;margin-left: 0px;" onclick="openCity(event,'MiniStatement')">MINI STATEMENT</button>
                        </div>
                    </div>
                    <div class="row">
                        <div id="CashWithdrawal" class="tabcontent">
                            <div class="title">
                                @*-------------------------------------------<!--Cash Withdrawal-->------------------------------------------------------*@
                                <div class="row justify-content-center" style="display: flex;justify-content: center;">
                                    <div class="col-md-5">
                                        <div class="card">
                                            <h4 class="card-title text-center" style="font-weight: bold;">Customer Details</h4>
                                            <div class="card-body py-md-4">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" maxlength="30" id="txtCustomerNameCashWithdrawal" placeholder="Customer Name">
                                                    <br />
                                                    <h5><span id="errtxtCustomerNameCashWithdrawal" style="color:red" class="errorMsg"></span></h5>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" maxlength="10" id="txtMobileNumCashWithdrawal" placeholder="Mobile Number">
                                                    <br />
                                                    <h5><span id="errtxtMobileNumCashWithdrawal" style="color:red" class="errorMsg"></span></h5>
                                                </div>
                                                <div class="form-group">
                                                    <select class="form-control" id="BId" name="BId"
                                                            asp-items="@(new SelectList(string.Empty,"Id","Title"))">
                                                        <option value="0">-Select Bank-</option>
                                                    </select>
                                                    <br />
                                                    <h5><span id="errSIdCashWithdrawal" style="color:red" class="errorMsg"></span></h5>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" maxlength="12" id="txtAadharNumberCashWithdrawal" placeholder="Aadhar Number">
                                                    <br />
                                                    <h5><span id="errtxtAadharNumberCashWithdrawal" style="color:red" class="errorMsg"></span></h5>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" maxlength="7" style="display:none;" id="txtAmountCashWithdrawal" placeholder="Enter Amount">
                                                    <br />
                                                    <h5><span id="errtxtAmountCashWithdrawal" style="color:red" class="errorMsg"></span></h5>
                                                </div>
                                                <div class="form-group">
                                                    <div class="tacbox">
                                                        <input id="checkboxCashWithdrawal" type="checkbox" />
                                                        <label for="checkbox">
                                                            <label class="_3De77">
                                                                Terms & Conditions<br />
                                                                Before you press next please read the <a style="color:blue" href="#"> Terms and Conditions</a>.
                                                            </label>
                                                        </label>
                                                        <br />
                                                        <h5><span id="errCheckBox" style="color:red" class="errorMsg"></span></h5>
                                                    </div>
                                                </div>
                                                <div class="d-flex flex-row align-items-center justify-content-between" style="margin-left: 60px;padding-bottom: 40px;">
                                                    <button class="button-27" onclick="submitCustomerDetails()" style="width: 200px;">Next</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>






    <!--Device not connected error Modal Popup-->
    @*-----------------------------------------------Device not connected error Modal Popup---------------------------------------------------------*@

    <input type="button" id="btndeviceNotConnected" data-target="#deviceNotConnected" data-toggle="modal" style="display:none" />
    <div class="modal fade" id="deviceNotConnected" role="dialog" style="margin-top: 100px;">
        @*chooseToVerifyFaceBiometric*@
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #2d385e;">
                    <a href="/Aeps/AEPS" style="padding-top:12px;" class="close close_cross">&times;</a>
                    <h4 class="modal-title" style="font-weight: 900; text-align: center;">Device Not Connected</h4>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="container">
                            <div class="row">
                                <div class="col-md-8" style="text-align:center;">
                                    <img src="../img/device biometric image/device_not_connected.png" style="height:50%;width:50%" />
                                </div>
                            </div>
                        </div>
                        <p style="color: #2d385e; font-weight: 900; font-size: 20px; text-align: center; margin-top: 20px;">Device not connected!</p>
                        <p style="color: #2d385e; font-weight: 800; font-size: 15px; text-align: center;">Pls connect your Mantra</p>
                    </div>
                </div>
                <br />
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-sm-12 col-md-12" style="text-align:center;">
                            <a href="/Aeps/AEPS" button type="button" id="btn btn-danger" class="button-27">Close</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!--Error Popup For FaceLiveLiness-->
    <input type="button" id="btnFaceLiveLinessError" data-target="#faceLiveLinessError" data-toggle="modal" style="display:none" />
    <div class="modal fade" id="faceLiveLinessError" role="dialog" style="margin-top: 100px;">
        <div class="modal-dialog modal-lg">
            <!-- Modal content -->
            <div class="modal-content">
                <div class="modal-body" style="background:lightgoldenrodyellow;">
                    <div class="col-sm-4 custom_img_size img_1">
                        <img src="~/css/Icon_Logo_BBPS/Warning_2.png" class="img-width img_warning">
                    </div>
                    <br />
                    <p class="headingfaceLiveLinessError"></p>
                    <br />
                    <center> <button class="btn btn-danger" id="myBtn">Close</button></center>
                </div>

            </div>
        </div>
    </div>



    @*--------------------------------------------Powered By--------------------------------------------------*@
    <div class="container-fluid">
        <div class="last-second-heading">
            <div class="col col-md-12 col-sm-12 col-lg-12">
                <div class="div-main-oplist">
                    <div class="div-recharge-opimage">
                        <div class="div-oprator-heading"><h4 class="heading_tag_bbps"><b>Powered By</b></h4></div>
                        <hr />
                        <div class="row" style="text-align:center;">
                            <div class="col-md-4"></div>
                            <div class="col-md-4 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/NPCI.png" alt="NPCI" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="NPCI"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr />
        <div class="last-heading">
            <div class="col col-md-12 col-sm-12 col-lg-12">
                <div class="div-main-oplist">
                    <div class="div-recharge-opimage">
                        <div class="div-oprator-heading"><h4 class="heading_tag_bbps"><b>Accepted Devices</b></h4></div>
                        <hr />
                        <div class="row" style="text-align:center;">
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Morpho.png" alt="Morpho" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Morpho"></a></div>
                                <div class="leade rship_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Startek.png" alt="Startek" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Startek"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Mantra.png" alt="Mantra" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Mantra"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Precision.png" alt="Precision" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Precision"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Secugen.png" alt="Secugen" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Secugen"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Tatvik-TMF20.png" alt="Tatvik" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Tatvik"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                            <div class="col-md-1 col-sm-12 col-xs-12 padding-top-10 custom_img_size">
                                <img src="~/img/img_devices/Next.png" alt="Next" class="img-width" style="height:100px;">
                                <div class="overlay"> <a href="#" target="_blank" class="icon" title="Next"></a></div>
                                <div class="leadership_name">
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         <div class="btn_Partial">
            @Html.Partial("_SelfHelp")
        </div>
    </div>
</div>


@*-------------------------------------------<!--Final Modal Of Transaction Success and Failure-->------------------------------------------------------*@
<!--Modal Success Message-->
<!-- Modal -->
<div class="row">
    <div class="col-sm-12 col-md-12 col-lg-12">
        <input type="button" id="btnmodalfinalResponse" style="display:none;" data-target="#modalfinalResponse" data-toggle="modal" />
        @*<div id="modalfinalResponse" role="dialog" class="modal fade" style="margin-top:47px;" aria-modal="true" data-backdrop="static" data-keyboard="false">*@
        <div id="modalfinalResponse" role="dialog" class="modal fade" aria-modal="true" data-backdrop="static" data-keyboard="false">
            @*<div class="modal-dialog modal-confirm" style="width: 1016px;max-height:100%;overflow-y:scroll !important;">*@
            <div class="modal-dialog modal-confirm" style="width:100%;">
                <div class="modal-content">
                    <div class="modal-header modal-header-recharge" style="margin-top: -20px;">
                        <a href="~/Aeps/AEPS" style="position: absolute;top: 14px;right: 15px;" class="close close_cross">&times;</a>
                        <h2 class="modal-title" style="text-align:center;font-weight:800;"><b>AEPS Transaction</b></h2>
                    </div>
                    <div class="modal-body">
                        <div class="row div-recharge-img">
                            <div class="col-sm-4 custom_img_size pay-img">
                                <img src="~/css/PaymentImages/Encrypted.png" class="img-width" style="height: 166px;width: 200px;float: left;">
                            </div>
                            <div class="col-sm-4">
                            </div>
                            <div class="col-sm-4 custom_img_size pay-img2">
                                <img src="~/css/Img_Aeps/NPCI-for-web.png" class="img-width" style="height: 201px;width: 201px;float: right;">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 custom_img_size pay-img" style="text-align:center;">
                                <img src="~/css/PaymentImages/RedmilLOGO.jpg" class="img-width" style="height: 140px;width: 191px;border-radius: 7%;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="">
                                <h4 id="lblSelectedTransactionMode" class="modal-title w-100" style="padding-top:59px;color: #000099;"></h4>
                                <div class="icon-box" style="top:423px;" id="icon">
                                    <label id="img" />
                                </div>
                                @*<h4 id="heading" class="modal-title w-100 heading_Aeps_final_response_Transaction_status" style="padding-top:59px;color: #000099;"></h4>*@
                                <h4 id="heading" class="modal-title w-100 heading_Aeps_final_response_Transaction_status"></h4>
                                <h4 id="heading_2 heading_Aeps_final_response_Transaction_status">Don't pay any charges for this transaction</h4>
                                <h4><label id="lblFailureResponseMessage" style="display:none;text-align:center;"></label></h4>
                            </div>
                        </div>
                        <div class="main-table-recharge">
                            <br />
                            <hr />
                            <table class="table table-bordered" id="tblData">
                                <tbody>
                                    <tr>
                                        <th scope="row">Date:</th>
                                        <td><label id="lblDate"></label></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Time:</th>
                                        <td><label id="lblTime"></label></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">BC Name:</th>
                                        <td><label id="lblBCName"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">Agent ID:</th>
                                        <td><label id="lblAgentID"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">BC Location:</th>
                                        <td><label id="lblBCLocation"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">Terminal ID:</th>
                                        <td><label id="lblTerminalID"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">Customer Aadhaar Number:</th>
                                        <td><label id="lblCustomerAadhaarNumber"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">Customer Name:</th>
                                        <td><label id="lblCustomerName"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">STAN:</th>
                                        <td><label id="lblStan"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">RRN:</th>
                                        <td><label id="lblRRN"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">UIDAI Auth Code:</th>
                                        <td><label id="lblUIDAICode"></label></td>

                                    </tr>
                                    <tr>
                                        <th scope="row">Transaction Status:</th>
                                        <td><label id="lblTransactionStatus"></label></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">A/C Balance:</th>
                                        <td><label id="lblAccountBalance"></label></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row" id="divMiniStatement" style="display:none">
                            <h2 id="headingReport" class="transRepoHead text-center"></h2>
                            <div id="temptableid" style="margin-left:50px;">
                            </div>
                        </div>
                    </div>
                    <br />
                    <br />
                    <br />
                    <div class="modal-footer">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-sm-4 col-md-4">
                                    <button type="button" id="btnShareReciept" onclick="confirmPopup()" class="button-27">Share Receipt to Customer</button>
                                </div>
                                <div class="col-sm-4 col-md-4">
                                    <a href="~/Aeps/AEPS" type="button" id="btnHomePage" class="button-27">Home</a>
                                </div>
                                <div class="col-sm-4 col-md-4">
                                    <button type="button" id="btnPrintReciept" onclick="downloadReceipt()" class="button-27">Download and Print Receipt</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>

<!--Longitiude and Latitude in JS-->
<script type="text/javascript">
    let transactionMode, bankName, selectedBiometricDeviceName, radioVal, bankUrl, bankLogo, insertedAmount = "0";
    let aepsAgentId, lati, long;
    let kycCheckBankName;
    let iciciProceedKYCData;
    let iciciAgentBiometricJson;
    let iciciAgentKYCBiometricSelection;
    let wadhKey = "E0jzJ/P8UopUHAieZn8CKqS4WPMi5ZSYXgfnlfkWjrc=";

    function geolocate() {
        debugger;
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                var geolocation = new google.maps.LatLng(
                    position.coords.latitude, position.coords.longitude);
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                $.ajax({
                    type: "POST",
                    url: "/Aeps/fingurprintBiometric",
                    data: { 'latitude': latitude, 'longitude': longitude },
                    type: 'POST',
                    dataType: 'json',
                    success: function (response) {
                        debugger;

                    },
                    failure: function (response) {
                        alert(response.responseText);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });
        }
    }

    let select = document.getElementById('aepsChooseTrasaction');
    //document.getElementById("btnTransaction").onclick =

    function CheckKYCStatus(variable) {
        debugger;
        var value = select.id
        radioVal = $('.radio1:checked').val();
        var ele = document.getElementsByClassName("radio1");
        for (i = 0; i < ele.length; i++) {
            if (ele[i].checked)
                data = ele[i].value;
        }
        debugger;
        if (radioVal == undefined || radioVal == '' || radioVal == null) {
<<<<<<< HEAD
            document.getElementById('walletMode').innerHTML = "Please select transaction to proceed!";
=======
            document.getElementById('walletMode').innerHTML = "Please select transaction mode to proceed!";
>>>>>>> 027cfeb0730b7d150f3edef4c757d5d5dba4f4f5
            return false;
        }
        else {
            document.getElementById('walletMode').innerHTML = "";
            jQuery('.remove').parent().remove();
            $.ajax({
                url: "/Aeps/GetAepsKycDetailsNew",
                data: { 'radioVal': radioVal, 'value': value, 'later': variable },
                type: 'POST',
                dataType: 'json',
                success: function (response) {
                    transactionMode = response.data2;
                    debugger;

                    //This will hit if Status is Pending And then Again Api Hit for Binding Bank Name
                    if (response.status == "bridge") {
                        $("#hdnTransactionMode").val(transactionMode);
                        document.getElementById("lblybl").innerHTML = response.data[0].bankName1;
                        document.getElementById("lblppb").innerHTML = response.data[0].bankName2;
                        document.getElementById("lblicici").innerHTML = response.data[0].bankName3;
                        $("#btnChooseBankKycBridgeModal").trigger("click");
                        $("#kycPendingModal").hide();
                    }

                    //When Response is Pending First Time
                    else if (response.status == "Pending") {
                        debugger;
                        document.getElementById("headingKYCStatus").innerHTML = "KYC Status: " + response.data[0].status;
                        var img = document.getElementById("img_kycPendingBank");
                        img.src = response.data[0].bankLogo;
                        kycCheckBankName = response.data[0].bankName;
                        $("#btnKycPending").trigger("click");
                    }

                    //When Response is Ratio First Time
                    else if (response.status == "RatioKYCFalse") {
                        transactionMode = response.data;
                        bankName = response.bankName;
                        $("#btndeviceModal").trigger("click");
                    }

                    else if (response.status == "RatioKYCTrue") {
                        transactionMode = response.data;
                        bankName = response.bankName;
                        $("#btndeviceModal").trigger("click");
                    }

                    //When Response is Exception First Time
                    else if (response.status == "Exception") {
                        transactionMode = response.data;
                        bankName = response.bankName;
                        $("#btndeviceModal").trigger("click");
                    }

                    else if (response.result == "EmptyResult") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "UnExpectedStatusCode") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "RedirectToException") {
                        window.location.href = response.url;
                    }
                }
            });
        }
    };


    function proceedToKyc() {
        $.ajax({
            url: "/Aeps/ProceedToKycFirstPage",
            data: { 'BankNAME': kycCheckBankName },
            type: 'POST',
            dataType: 'json',
            success: function (response) {
                debugger;
                if (response.status == "AgentOnBoardingPending") {
                    $("#kycPendingModal").hide();
                    $("#btnagentOnboarding").trigger("click");

                }
                else if (response.status == "AgentOnBoardingCompleted") {
                    $("#kycPendingModal").hide();
                    $("#btnagentOnboarding").trigger("click");

                }
            }
        });
    }



    function proceedForEKYC2() {
        var lat = "";
        var long = "";
        $.ajax({
            url: "/Aeps/ProceedToKycSecondPageButton",
            data: { 'longg': long, 'lat': lat },
            type: 'POST',
            dataType: 'json',
            success: function (response) {
                debugger;

                if (response.result == "EmptyResult") {
                    window.location.href = response.url;
                }
                else if (response.result == "UnExpectedStatusCode") {
                    window.location.href = response.url;
                }
                else if (response.result == "RedirectToException") {
                    window.location.href = response.url;
                }
                else if (response.result == "TXN") {
                    iciciProceedKYCData = response.jsondata;
                    //Agent Onboarding popup will be hide
                    $("#agentOnboarding").hide();
                    //And OTP Popup will be opened for Otp
                    $("#btnmobileOtpValidation").trigger("click");

                }
                else if (response.Statuscode == "ERR") {

                }
            }

        });

    }


    function mobileOtpValidationForKYC() {
        debugger;
        var data = iciciProceedKYCData;
        var json = JSON.stringify(data);
        var otp = $("#txtOTPVerifyForKYC").val();
        if (otp.length < 6) {
            document.getElementById("errtxtOTPVerifyForKYC").innerHTML = "Please Enter Valid OTP";
        }
        else {
            document.getElementById("errtxtOTPVerifyForKYC").innerHTML = "";
            $.ajax({
                url: "/Aeps/ProceedToKycThirdPageButton",
                data: { 'data': json, 'otp': otp },
                type: 'POST',
                dataType: 'json',
                success: function (response) {
                    debugger;

                    if (response.result == "EmptyResult") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "UnExpectedStatusCode") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "RedirectToException") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "TXN") {
                        iciciAgentBiometricJson = response.data;
                        //OTP popup will be hide
                        $("#mobileOtpValidation").hide();
                        //And Biometric Popup will be opened for Otp
                        $("#btniciciAgentBiometric").trigger("click");
                    }
                    else if (response.Statuscode == "ERR") {

                    }
                }
            });
        }
    }


    function iciciAgentBiometricDeviceSelection() {
        debugger;
        iciciAgentKYCBiometricSelection = $('.morpho1:checked').val();
        var radioVal = iciciAgentKYCBiometricSelection;
        if (radioVal == undefined || radioVal == '' || radioVal == null) {
            document.getElementById("errDevice").innerHTML = "Please select any one device";
            return false;
        }
        else {
            document.getElementById("errDevice").innerHTML = "";
            //BiometricDevice popup will be hide
            $("#iciciAgentBiometric").hide();
            //And Biometric Popup will be opened for Otp
            $("#btnagentAadharPanPopu").trigger("click");
        }
    }


    function iciciAgentBiometricFinal() {
        debugger;
        var data = iciciAgentBiometricJson;
        var json = JSON.stringify(data);

        $.ajax({
            url: "/Aeps/ProceedToKycFourthPageButton",
            data: { 'data': json, 'deviceVal': iciciAgentKYCBiometricSelection, 'wadhKey': wadhKey },
            type: 'POST',
            dataType: 'json',
            success: function (response) {
                debugger;

                if (response.result == "EmptyResult") {
                    window.location.href = response.url;
                }
                else if (response.result == "UnExpectedStatusCode") {
                    window.location.href = response.url;
                }
                else if (response.result == "RedirectToException") {
                    window.location.href = response.url;
                }
                else if (response.result == "TXN") {
                    var img = document.getElementById("imgKYCFinalResponseImage");
                    img.src = "/css/Img_Aeps/AepsKYCFinalSuccess.jpeg";
                    document.getElementById("agentKYCFinalResponseMessage1").innerHTML = response.message;
                    document.getElementById("agentKYCFinalResponseMessage2").innerHTML = "You can use DMT and AEPS service now and earn!";
                    //Aadhaar and Pan OTP popup will be hide
                    $("#btnagentAadharPanPopu").hide();
                    //And  Final KYC Response Popup will be opened
                    $("#btnagentKYCResponsePopup").trigger("click");
                }
                else if (response.Statuscode == "ERR") {
                    var img = document.getElementById("imgKYCFinalResponseImage");
                    img.src = "/css/Img_Aeps/AepsKYCFailedResponse.png";
                    document.getElementById("agentKYCFinalResponseMessage1").innerHTML = response.message;
                    document.getElementById("agentKYCFinalResponseMessage2").innerHTML = "";
                    //Aadhaar and Pan OTP popup will be hide
                    $("#btnagentAadharPanPopu").hide();
                    //And  Final KYC Response Popup will be opened
                    $("#btnagentKYCResponsePopup").trigger("click");
                }
            }
        });
    }



    function chooseBank() {
        debugger;
        var transactionvalue = $("#hdnTransactionMode").val();
        $("#hdnTransactionModeDevice").val(transactionvalue);

        var data;
        var value = document.getElementById("lblybl").innerHTML;
        var value1 = document.getElementById("lblppb").innerHTML;
        var value2 = document.getElementById("lblicici").innerHTML;
        var ele = document.getElementsByClassName("rdbBank");

        for (i = 0; i < ele.length; i++) {
            if (ele[i].checked)

                data = ele[i].value;
        }
        if (data == undefined || data == '' || data == null || data == "") {
            document.getElementById("errbank").innerHTML = "Please Select Bank";
            return false;
        }
        else {

            document.getElementById("errbank").innerHTML = "";
            if (data == 'YES') {
                data = value;
            }
            else if (data == 'Paytm') {
                data = value1;
            }
            else if (data == 'ICICI Bank') {
                data = value2;
            }
            var bankDeviceVal = data;
            bankName = data;
            $("#hdnTransactionBankDevice").val(bankDeviceVal);
            radioVal = $('.radio1:checked').val();
            debugger;
            if (data == 'ICICI Bank') {
                debugger;
                $.ajax({
                url: "/Aeps/ProceedToKycFirstPage",
                    data: { 'BankNAME': bankDeviceVal },
                type: 'POST',
                dataType: 'json',
                success: function (response) {
                    debugger;
                    $("#chooseBankKycBridgeModal").hide();
                    $("#btndeviceModal").trigger("click");
                }
            });
            }
            else{
                $.ajax({
                url: "/Aeps/GetAepsKycDetailsNew",
                data: { 'radioVal': radioVal, 'bankName': data },
                type: 'POST',
                dataType: 'json',
                success: function (response) {
                    debugger;
                    $("#chooseBankKycBridgeModal").hide();
                    $("#btndeviceModal").trigger("click");
                }
            });
            }
            
        }
    };



    //This will hit after Device Selection For Aadhar Pic Verification API Hit when Device will be Selected
    function VerifyFaceBiometricModal() {
        var transMode = transactionMode;
        var bank = bankName;
        debugger;
        radioVal = $('.morpho:checked').val();
        var device = radioVal;
        if (radioVal == undefined || radioVal == '' || radioVal == null) {
            document.getElementById("errDevice").innerHTML = "Please select any one device";
            return false;
        }
        else {
            document.getElementById("errDevice").innerHTML = "";
            $.ajax({
                url: "/Aeps/AaadharPicVerification",
                data: { 'radioValDevice': radioVal, 'transMode': transMode, 'device': device, 'bank': bank },
                type: 'POST',
                dataType: 'json',
                success: function (response) {
                    debugger;
                    if (response.statuscode == 'TXN') {
                        $("#btnVerifyPopup").trigger("click");
                        $("#deviceModal").hide();
                    }
                    else if (response.result == 'RedirectToCustomer') {
                        debugger;

                        if (bank == "ICICI Bank" || bank == "Fingpay") {
                            var img = document.getElementById("img_SelectedBank");
                            img.src = "/css/Img_Aeps/icici-bank-vector-logo.png";
                            var mobileNumber = '@ViewBag.MobileNo';
                            aepsAgentId = "RED" + mobileNumber;
<<<<<<< HEAD

                            GetLocation();
                            lati = $("#hdnLong").val();
                            long = $("#hdnLat").val();

                                if (transactionMode == "be" || transactionMode == "ms") {
                                    document.getElementById("txtAmountCashWithdrawal").style.display="none";
                                }
                                else {
                                    document.getElementById("txtAmountCashWithdrawal").style.display="block";
                                }
                                

=======
                            bankList();
                            if (transactionMode == "cw") {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "block";
                            }
                            else {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "none";
                            }
>>>>>>> 027cfeb0730b7d150f3edef4c757d5d5dba4f4f5
                            $("#btnAadharCustomerDetails").trigger("click");
                            $("#deviceModal").hide();
                            //$("#hdnLong1").val();
                            //$("#hdnLat1").val();
                            //GetLocation();
                            //lati = $("#hdnLong").val();
                            //long = $("#hdnLat").val();

                            //    if (transactionMode == "be" || transactionMode == "ms") {
                            //        document.getElementById("txtAmountCashWithdrawal").style.display="none";
                            //    }
                            //    else {
                            //        document.getElementById("txtAmountCashWithdrawal").style.display="block";
                            //    }
                        }
                        else if (bank == "Yes Bank") {
                            var img = document.getElementById("img_SelectedBank");
                            img.src = "/css/Img_Aeps/Yes_Bank_logo.jpeg";
                            debugger;
                            aepsAgentId = '@ViewBag.AepsAgentId';
                            bankList();
                            if (transactionMode == "cw") {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "block";
                            }
                            else {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "none";
                            }
                            $("#btnAadharCustomerDetails").trigger("click");
                            $("#deviceModal").hide();
                        }
                    }

                    else if (response.statuscode == 'SKP') {
                        if (bank == "ICICI Bank" || bank == "Fingpay") {
                            var img = document.getElementById("img_SelectedBank");
                            img.src = "/css/Img_Aeps/icici-bank-vector-logo.png";

                            var mobileNumber = '@ViewBag.MobileNo';
                            aepsAgentId = "RED" + mobileNumber;
                            bankList();
                            if (transactionMode == "cw") {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "block";
                            }
                            else {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "none";
                            }
                            $("#btnAadharCustomerDetails").trigger("click");
                            $("#deviceModal").hide();
                            //$("#hdnLong1").val();
                            //$("#hdnLat1").val();
                            //GetLocation();
                            //lati = $("#hdnLong").val();
                            //long = $("#hdnLat").val();

                            //    if (transactionMode == "be" || transactionMode == "ms") {
                            //        document.getElementById("txtAmountCashWithdrawal").style.display="none";
                            //    }
                            //    else {
                            //        document.getElementById("txtAmountCashWithdrawal").style.display="block";
                            //    }
                        }
                        else if (bank == "Yes Bank") {
                            var img = document.getElementById("img_SelectedBank");
                            img.src = "/css/Img_Aeps/Yes_Bank_logo.jpeg";
                            aepsAgentId = '@ViewBag.AepsAgentId';
                            bankList();
                            if (transactionMode == "cw") {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "block";
                            }
                            else {
                                document.getElementById("txtAmountCashWithdrawal").style.display = "none";
                            }
                            $("#btnAadharCustomerDetails").trigger("click");
                            $("#deviceModal").hide();
                        }
                    }
                    else if (response.result == "EmptyResult") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "UnExpectedStatusCode") {
                        window.location.href = response.url;
                    }
                    else if (response.result == "RedirectToException") {
                        window.location.href = response.url;
                    }
                }
            });
        }
    };





    function GetLocation() {
        if (navigator.geolocation) {
            debugger;
            navigator.geolocation.getCurrentPosition(ShowPosition, showError);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function ShowPosition(position) {
        debugger;
        $("#hdnLong1").val(position.coords.longitude);
        $("#hdnLat1").val(position.coords.latitude);
        var baseUrl = "https://www.google.com/maps/search/";
        var mapUrl = baseUrl + "/" + $("#hdnLat1").val() + "," + $("#hdnLong1").val();
<<<<<<< HEAD
        window.open(mapUrl);
=======
        //window.open(mapUrl);
>>>>>>> 027cfeb0730b7d150f3edef4c757d5d5dba4f4f5
        //$.ajax({
        //    url: "/Aeps/getAddress",
        //    data: { 'longg': $("#hdnLong1").val(), 'lat': $("#hdnLat1").val()},
        //    type: 'POST',
        //    dataType: 'json',
        //    success: function (responsedata) {
        //        debugger;
        //    }
        //})
<<<<<<< HEAD
=======
    }
    function showError(error) {
        switch (error.code) {
            case error.PERMISSION_DENIED:
                //x.innerHTML = "User denied the request for Geolocation."
                alert("User denied the request for Geolocation.");
                break;
            case error.POSITION_UNAVAILABLE:
                //x.innerHTML = "Location information is unavailable."
                alert("Location information is unavailable.");
                break;
            case error.TIMEOUT:
                //x.innerHTML = "The request to get user location timed out."
                alert("The request to get user location timed out.")
                break;
            case error.UNKNOWN_ERROR:
                //x.innerHTML = "An unknown error occurred."
                alert("An unknown error occurred.");
                break;
        }
>>>>>>> 027cfeb0730b7d150f3edef4c757d5d5dba4f4f5
    }

    function submitCustomerDetails() {
        debugger;
        var customerName = $("#txtCustomerNameCashWithdrawal").val();
        var customerMobile = $("#txtMobileNumCashWithdrawal").val();
        var userselectedBankName = $("#BId").find("option:selected").text();
        var customerAadharNumber = $("#txtAadharNumberCashWithdrawal").val();

        let checkboxAgreement = document.getElementById("checkboxCashWithdrawal");
        if (customerName.length === 0) {
            document.getElementById("errtxtCustomerNameCashWithdrawal").innerHTML = "Please Enter Customer Name";
        }
        else if (customerMobile.length === 0) {
            document.getElementById("errtxtMobileNumCashWithdrawal").innerHTML = "Please Enter Mobile Number";
        }
        else if (userselectedBankName.length === 0) {
            document.getElementById("errSIdCashWithdrawal").innerHTML = "Please Select Any Bank";
        }
        else if (customerAadharNumber.length === 0) {
            document.getElementById("errcustomerAadharNumber").innerHTML = "Please Enter Aadhaar Number";
        }
        else if (!checkboxAgreement.checked) {
            document.getElementById("errCheckBox").innerHTML = "Please accept the agreement to proceed";
        }
        else {

            var customeramount = $("#txtAmountCashWithdrawal").val();
            if (transactionMode == "be" || transactionMode == "ms") {
                document.getElementById("txtAmountCashWithdrawal").style.display = "none";
                document.getElementById("errtxtAmountCashWithdrawal").innerHTML = "";
                document.getElementById("errtxtCustomerNameCashWithdrawal").innerHTML = "";
                document.getElementById("errtxtMobileNumCashWithdrawal").innerHTML = "";
                document.getElementById("errSIdCashWithdrawal").innerHTML = "";
                document.getElementById("errtxtAadharNumberCashWithdrawal").innerHTML = "";
                var selectedText = $("#BId").find("option:selected").text();
                var selectedValue = $('#BId').find('option:selected').val();
                debugger;

                $.ajax({
                    type: "POST",
                    url: "/Aeps/fingurprintBiometric",
                    data: { 'customerName': customerName, 'transactionMode': transactionMode, 'insertedAmount': insertedAmount, 'deBankName': bankName, 'customerMobile': customerMobile, 'userselectedBankName': userselectedBankName, 'customerAadharNumber': customerAadharNumber, 'iin': selectedValue, 'deviceName': radioVal, 'aepsAgentId': aepsAgentId },
                    dataType: 'json',
                    success: function (response) {
                        debugger;
                        if (response.status = "AgentOnBoardingPending"){
                            $("#kycPendingModal").hide();
                            $("#btnagentOnboarding").trigger("click");
                        }
                        else if (response.result == "EmptyResult") {
                            window.location.href = response.url;
                        }
                        else if (response.result == "UnExpectedStatusCode") {
                            window.location.href = response.url;
                        }
                        else if (response.result == "RedirectToException") {
                            window.location.href = response.url;
                        }
                        else if (response.statuscode == "TXN") {
                            if (transactionMode == "be") {
                                document.getElementById("lblSelectedTransactionMode").innerHTML = "BALANCE ENQUIRY";
                            }
                            else if (transactionMode == "ms") {
                                document.getElementById("lblSelectedTransactionMode").innerHTML = "MINI STATEMENT";
                            }
                            document.getElementById("heading").innerHTML = "Transaction Success";
                            document.getElementById("img").innerHTML = '<i class="fa fa-check"></i>'
                            document.getElementById("icon").style.backgroundColor = '#82ce34';
                            var datetime = response.data.reqdate;
                            date = datetime.split('T')[0];
                            time = datetime.split('T')[1];
                            const timeString = time;

                            const timeString12hr = new Date('1970-01-01T' + timeString + 'Z')
                                .toLocaleTimeString('en-US',
                                    { timeZone: 'UTC', hour12: true, hour: 'numeric', minute: 'numeric' }
                                );
                            document.getElementById("lblDate").innerHTML = date;
                            document.getElementById("lblTime").innerHTML = timeString12hr;


                            document.getElementById("lblBCName").innerHTML = response.data.bcName;
                            document.getElementById("lblAgentID").innerHTML = response.data.agentID;
                            document.getElementById("lblBCLocation").innerHTML = response.data.bcLocation;
                            document.getElementById("lblTerminalID").innerHTML = response.data.terminalID;
                            document.getElementById("lblCustomerAadhaarNumber").innerHTML = response.data.customerAadhaarNo;
                            document.getElementById("lblCustomerName").innerHTML = response.data.customerName;
                            document.getElementById("lblStan").innerHTML = response.data.stan;
                            document.getElementById("lblRRN").innerHTML = response.data.rrn;
                            document.getElementById("lblUIDAICode").innerHTML = response.data.uidaiAuthCode;
                            document.getElementById("lblTransactionStatus").innerHTML = response.data.status;
                            document.getElementById("lblAccountBalance").innerHTML = "₹" + response.data.acBalance;
                            if (transactionMode == "ms") {
                                debugger;
                                $("#temptableid").find("table").remove();
                                var tr = '<table id="tempTbl1" mode="static" class="table table-striped table-bordered table-responsive wrapper dataTable no-footer responsive_table_businessRepo" border="1" cellspacing="0" cellpadding="3" style="width:100%"><thead><tr>';
                                var columnName = Object.keys(response.miniStatementData[0]);
                                for (var i = 0; i < columnName.length; i++) {
                                    tr += '<th class="business_Repo_Table_Header">' + columnName[i] + '</th>'
                                }
                                tr += '</tr></thead>';
                                tr += '<tbody id="output">';

                                for (var i = 0; i < response.miniStatementData.length; i++) {
                                    tr += '<tr>'
                                    var columnValue = Object.values(response.miniStatementData[i]);
                                    for (var j = 0; j < columnValue.length; j++) {
                                        tr += '<td class="business_Repo_Table_td">' + columnValue[j] + '</td>'
                                    }
                                    tr += '</tr>';
                                }
                                debugger;
                                tr += '</tbody></table>';
                                $("#temptableid").append(tr);
                                var table = $('#tempTbl1').DataTable({
                                    rowReorder: {
                                        selector: 'td:nth-child(2)'
                                    },
                                    responsive: true
                                });
                                //let output = response.miniStatementData.map(i => "<tr class='tr-recharge'><td class='td-recharge'>" + i.date + "</td><td>" + i.narration + "</td><td>" + i.txnType + "</td><td>" + i.amount + "</td></tr>");
                                //$("#tbloutput").html(output);
                                document.getElementById("divMiniStatement").style.display = "block";
                            }
                            else {
                                document.getElementById("divMiniStatement").style.display = "none";
                            }

                            $("#btnmodalfinalResponse").trigger("click");
                            $("#aadharCustomerDetailsPopUp").hide();

                        }
                        else if (response.statuscode == "ERR") {
                            if (transactionMode == "be") {
                                document.getElementById("lblSelectedTransactionMode").innerHTML = "BALANCE ENQUIRY";
                            }
                            else if (transactionMode == "ms") {
                                document.getElementById("lblSelectedTransactionMode").innerHTML = "MINI STATEMENT";
                            }
                            document.getElementById("heading").innerHTML = "Transaction Failed";
                            document.getElementById("img").innerHTML = '<i class="fa fa-times"></i>'
                            document.getElementById("icon").style.backgroundColor = '#880808';
                            document.getElementById("lblFailureResponseMessage").style.display = "block";
                            document.getElementById("lblFailureResponseMessage").innerHTML = "Reason:" + response.data.response;
                            var datetime = response.data.reqdate;
                            date = datetime.split('T')[0];
                            time = datetime.split('T')[1];
                            const timeString = time;

                            const timeString12hr = new Date('1970-01-01T' + timeString + 'Z')
                                .toLocaleTimeString('en-US',
                                    { timeZone: 'UTC', hour12: true, hour: 'numeric', minute: 'numeric' }
                                );
                            document.getElementById("lblDate").innerHTML = date;
                            document.getElementById("lblTime").innerHTML = timeString12hr;


                            document.getElementById("lblBCName").innerHTML = response.data.bcName;
                            document.getElementById("lblAgentID").innerHTML = response.data.agentID;
                            document.getElementById("lblBCLocation").innerHTML = response.data.bcLocation;
                            document.getElementById("lblTerminalID").innerHTML = response.data.terminalID;
                            document.getElementById("lblCustomerAadhaarNumber").innerHTML = response.data.customerAadhaarNo;
                            document.getElementById("lblCustomerName").innerHTML = response.data.customerName;
                            document.getElementById("lblStan").innerHTML = response.data.stan;
                            document.getElementById("lblRRN").innerHTML = response.data.rrn;
                            document.getElementById("lblUIDAICode").innerHTML = response.data.uidaiAuthCode;
                            document.getElementById("lblTransactionStatus").innerHTML = response.data.status;
                            document.getElementById("lblAccountBalance").innerHTML = "₹" + response.data.acBalance;
                            if (transactionMode == "ms") {
                                $("#temptableid").find("table").remove();
                                var tr = '<table id="tempTbl1" mode="static" class="table table-striped table-bordered table-responsive wrapper dataTable no-footer responsive_table_businessRepo" border="1" cellspacing="0" cellpadding="3" style="width:100%"><thead><tr>';
                                if (response.miniStatementData != null && response.miniStatementData != '' && response.miniStatementData != "") {

                                    var columnName = Object.keys(response.miniStatementData);
                                    for (var i = 0; i <= columnName.length; i++) {
                                        tr += '<th class="business_Repo_Table_Header">' + columnName[i].replace(/([a-z0-9])([A-Z])/g, '$1 $2').toUpperCase() + '</th>'
                                    }
                                    tr += '</tr></thead>';
                                    tr += '<tbody id="output">';

                                    for (var i = 0; i < response.miniStatementData.length; i++) {
                                        tr += '<tr>'
                                        var columnValue = Object.values(response.miniStatementData[i]);
                                        for (var j = 0; j <= columnValue.length; j++) {
                                            tr += '<td class="business_Repo_Table_td">' + columnValue[j] + '</td>'
                                        }
                                        tr += '</tr>';
                                    }
                                    debugger;
                                    tr += '</tbody></table>';
                                    $("#temptableid").append(tr);
                                    var table = $('#tempTbl1').DataTable({
                                        rowReorder: {
                                            selector: 'td:nth-child(2)'
                                        },
                                        responsive: true
                                    });
                                    document.getElementById("divMiniStatement").style.display = "block";
                                }
                                else {
                                    document.getElementById("divMiniStatement").style.display = "block";
                                }
                            }
                            else {
                                document.getElementById("divMiniStatement").style.display = "none";
                            }
                            $("#btnmodalfinalResponse").trigger("click");
                            $("#aadharCustomerDetailsPopUp").hide();
                        }
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            }
            else if (transactionMode == "cw") {
                document.getElementById("txtAmountCashWithdrawal").style.display = "block";
                insertedAmount = $("#txtAmountCashWithdrawal").val();
                if (insertedAmount < 100 && insertedAmount > 10000) {
                    document.getElementById("errtxtAmountCashWithdrawal").innerHTML = "Please Enter Amount Between 100 to 10000";
                }
                else {
                    document.getElementById("errtxtAmountCashWithdrawal").innerHTML = "";
                    document.getElementById("errtxtCustomerNameCashWithdrawal").innerHTML = "";
                    document.getElementById("errtxtMobileNumCashWithdrawal").innerHTML = "";
                    document.getElementById("errSIdCashWithdrawal").innerHTML = "";
                    document.getElementById("errtxtAadharNumberCashWithdrawal").innerHTML = "";
                    var selectedText = $("#BId").find("option:selected").text();
                    var selectedValue = $('#BId').find('option:selected').val();
                    document.getElementById("lblSelectedTransactionMode").innerHTML = "CASH WITHDRAWAL";
                    debugger;

                    $.ajax({
                        type: "POST",
                        url: "/Aeps/fingurprintBiometric",
                        data: { 'customerName': customerName, 'transactionMode': transactionMode, 'insertedAmount': insertedAmount, 'deBankName': bankName, 'customerMobile': customerMobile, 'userselectedBankName': userselectedBankName, 'customerAadharNumber': customerAadharNumber, 'iin': selectedValue, 'deviceName': radioVal, 'aepsAgentId': aepsAgentId },
                        dataType: 'json',
                        success: function (response) {

                            debugger;
                            if (response.result == "EmptyResult") {
                                window.location.href = response.url;
                            }
                            else if (response.result == "UnExpectedStatusCode") {
                                window.location.href = response.url;
                            }
                            else if (response.result == "RedirectToException") {
                                window.location.href = response.url;
                            }
                            else if (response.statuscode == "TXN") {


                                document.getElementById("heading").innerHTML = "Transaction Success";
                                document.getElementById("img").innerHTML = '<i class="fa fa-check"></i>'
                                document.getElementById("icon").style.backgroundColor = '#82ce34';
                                var datetime = response.data.reqdate;
                                date = datetime.split('T')[0];
                                time = datetime.split('T')[1];
                                const timeString = time;

                                const timeString12hr = new Date('1970-01-01T' + timeString + 'Z')
                                    .toLocaleTimeString('en-US',
                                        { timeZone: 'UTC', hour12: true, hour: 'numeric', minute: 'numeric' }
                                    );
                                document.getElementById("lblDate").innerHTML = date;
                                document.getElementById("lblTime").innerHTML = timeString12hr;



                                document.getElementById("lblBCName").innerHTML = response.data.bcName;
                                document.getElementById("lblAgentID").innerHTML = response.data.agentID;
                                document.getElementById("lblBCLocation").innerHTML = response.data.bcLocation;
                                document.getElementById("lblTerminalID").innerHTML = response.data.terminalID;
                                document.getElementById("lblCustomerAadhaarNumber").innerHTML = response.data.customerAadhaarNo;
                                document.getElementById("lblCustomerName").innerHTML = response.data.customerName;
                                document.getElementById("lblStan").innerHTML = response.data.stan;
                                document.getElementById("lblRRN").innerHTML = response.data.rrn;
                                document.getElementById("lblUIDAICode").innerHTML = response.data.uidaiAuthCode;
                                document.getElementById("lblTransactionStatus").innerHTML = response.data.status;
                                document.getElementById("lblAccountBalance").innerHTML = "₹" + response.data.acBalance;
                                $("#btnmodalfinalResponse").trigger("click");
                                $("#aadharCustomerDetailsPopUp").hide();

                            }
                            else if (response.statuscode == "ERR") {
                                document.getElementById("heading").innerHTML = "Transaction Failed";
                                document.getElementById("img").innerHTML = '<i class="fa fa-times"></i>'
                                document.getElementById("icon").style.backgroundColor = '#880808';
                                document.getElementById("lblFailureResponseMessage").style.display = "block";
                                document.getElementById("lblFailureResponseMessage").innerHTML = "Reason:" + response.data.response;

                                var datetime = response.data.reqdate;
                                date = datetime.split('T')[0];
                                time = datetime.split('T')[1];
                                const timeString = time;

                                const timeString12hr = new Date('1970-01-01T' + timeString + 'Z')
                                    .toLocaleTimeString('en-US',
                                        { timeZone: 'UTC', hour12: true, hour: 'numeric', minute: 'numeric' }
                                    );
                                document.getElementById("lblDate").innerHTML = date;
                                document.getElementById("lblTime").innerHTML = timeString12hr;


                                document.getElementById("lblBCName").innerHTML = response.data.bcName;
                                document.getElementById("lblAgentID").innerHTML = response.data.agentID;
                                document.getElementById("lblBCLocation").innerHTML = response.data.bcLocation;
                                document.getElementById("lblTerminalID").innerHTML = response.data.terminalID;
                                document.getElementById("lblCustomerAadhaarNumber").innerHTML = response.data.customerAadhaarNo;
                                document.getElementById("lblCustomerName").innerHTML = response.data.customerName;
                                document.getElementById("lblStan").innerHTML = response.data.stan;
                                document.getElementById("lblRRN").innerHTML = response.data.rrn;
                                document.getElementById("lblUIDAICode").innerHTML = response.data.uidaiAuthCode;
                                document.getElementById("lblTransactionStatus").innerHTML = response.data.status;
                                document.getElementById("lblAccountBalance").innerHTML = "₹" + response.data.acBalance;
                                $("#btnmodalfinalResponse").trigger("click");
                                $("#aadharCustomerDetailsPopUp").hide();
                            }
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        },
                        error: function (response) {
                            alert(response.responseText);
                        }
                    });
                }
            }
        }
    }




    function displayLocation(lat, long) {
        var geocoder;
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(lat, long);
        debugger;
        geocoder.geocode(
            { 'latLng': latlng },
            function (results, status) {
                debugger;
                if (status == google.maps.GeocoderStatus.OK) {
                    if (results[0]) {
                        var add = results[0].formatted_address;
                        var value = add.split(",");

                        count = value.length;
                        country = value[count - 1];
                        state = value[count - 2];
                        city = value[count - 3];
                        x.innerHTML = "city name is: " + city;
                    }
                    else {
                        x.innerHTML = "address not found";
                    }
                }
                else {
                    x.innerHTML = "Geocoder failed due to: " + status;
                }
            }
        );
    }


    //function getLocationFromLatLong(latitude, longitude) {
    //    debugger;
    //    var geocoder = new google.maps.Geocoder();
    //    var latlng = new google.maps.LatLng(latitude, longitude);
    //    geocoder.geocode({ 'latLng': latlng },
    //    function (results, status) {
    //        debugger;
    //        if (status == google.maps.GeocoderStatus.OK) {
    //            if (results[0]) {
    //                console.log(results[0].formatted_address); // Returns the address of the location
    //            } else {
    //                console.log('No results found');
    //            }
    //        } else {
    //            console.log('Geocoder failed due to: ' + status);
    //        }
    //    });
    //}






    //function getLocationWithAddress(){
    //    debugger;
    //    var NodeGeocoder = require('node-geocoder');

    //    var options = {
    //        provider: 'google',
    //        httpAdapter: 'https', // Default
    //        apiKey: ' ', // for Mapquest, OpenCage, Google Premier
    //        formatter: 'json' // 'gpx', 'string', ...
    //    };

    //    var geocoder = NodeGeocoder(options);

    //    geocoder.reverse({ lat: 28.5967439, lon: 77.3285038 }, function (err, res) {
    //        console.log(res);
    //    });
    //}







    function FaceLiveliness() {
        debugger;
        $("#staticBackdrops").trigger("click");

    }


    function openCamera() {

        debugger;
        // get the video element from the HTML document
        var video = document.getElementById("videoElement");

        // check if the browser supports webRTC
        if (navigator.mediaDevices.getUserMedia) {
            // request access to the user's camera
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    // set the video element's source to the camera stream
                    video.srcObject = stream;
                })
                .catch(function (err) {
                    console.log("Error: " + err);
                });
        }

        // get the snap button and canvas element from the HTML document
        var snapBtn = document.getElementById("snapBtn");
        var canvas = document.getElementById("canvasElement");
        var context = canvas.getContext("2d");

        // add an event listener to the snap button
        snapBtn.addEventListener("click", function () {
            debugger;
            // set the canvas element's dimensions to match the video element's
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;

            // draw the current video frame onto the canvas
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            // get the image data as a base64-encoded string
            var imageData = canvas.toDataURL("image/png");

            // log the image data to the console
            document.getElementById('canvasElement').innerHTML =
                '<img src="' + imageData + '" width="737px" height="466px" id="getimage"/>';
            $('#staticBackdrops').hide();
            $("#staticimages").trigger("click");
        });


    }

    function Veryfyimage() {
        debugger;
        var data_uri = document.getElementById('canvasElement').innerHTML;
        var result = data_uri.indexOf(",");
        var legth = data_uri.length;
        var showimage = data_uri.slice(result + 1, legth);
        var transMode = transactionMode;
        var device = radioVal;
        var bank = bankName;
        $.ajax({
            url: "/Aeps/FaceLiveLiness",
            data: { 'showimage': showimage, 'transMode': transMode, 'device': device, 'bank': bank },
            type: 'POST',
            dataType: 'json',
            success: function (data) {
                debugger;
                if (data.result == "RedirectToCustomer") {

                    if (bank == "ICICI Bank" || bank == "Fingpay") {
                        var img = document.getElementById("img_SelectedBank");
                        img.src = "/css/Img_Aeps/icici-bank-vector-logo.png";

                        var mobileNumber = '@ViewBag.MobileNo';
                        aepsAgentId = "RED" + mobileNumber;

<<<<<<< HEAD
                        GetLocation();
                        lati = $("#hdnLong").val();
                        long = $("#hdnLat").val();
=======
                        //GetLocation();
                        //lati = $("#hdnLong").val();
                        //long = $("#hdnLat").val();
>>>>>>> 027cfeb0730b7d150f3edef4c757d5d5dba4f4f5

                        if (transactionMode == "be" || transactionMode == "ms") {
                            document.getElementById("txtAmountCashWithdrawal").style.display = "none";
                        }
                        else {
                            document.getElementById("txtAmountCashWithdrawal").style.display = "block";
                        }
<<<<<<< HEAD


                        $("#btnAadharCustomerDetails").trigger("click");
                        $("#deviceModal").hide();
                        //$.ajax({
                        //    url: "/Aeps/getAddress",
                        //    data: { 'lat': $("#hdnLong").val(), 'lon': $("#hdnLat").val() },
                        //    type: 'POST',
                        //    dataType: 'json',
                        //    success: function (responsedata) {
                        //        debugger;
                        //    }
                        //})
=======
                        bankList();

                        $("#btnAadharCustomerDetails").trigger("click");
                        $("#deviceModal").hide();
>>>>>>> 027cfeb0730b7d150f3edef4c757d5d5dba4f4f5
                        $("#hdnLong1").val();
                        $("#hdnLat1").val();
                    }
                    else if (bank == "") {
                        var img = document.getElementById("img_SelectedBank");
                        img.src = response.data[0].bankLogo;
                        $("#btnAadharCustomerDetails").trigger("click");
                        $("#deviceModal").hide();
                    }
                }

                else if (data.result == "EmptyResult") {
                    window.location.href = data.url;
                }
                else if (data.result == "UnExpectedStatusCode") {
                    window.location.href = data.url;
                }
                else if (data.result == "RedirectToException") {
                    window.location.href = data.url;
                }
                else if (data.statuscode == "ERR") {
                    //document.getElementById("headingfaceLiveLinessError").innerHTML=data.message;
                    $("#headingfaceLiveLinessError").html(data.message);
                    $("#staticimage").hide();
                    $("#btnFaceLiveLinessError").trigger("click");

                }

            }
        });

    }



    function bankList() {
        $.ajax({
            url: "/Aeps/AllBankList",
            data: { 'BankNameSelected': bankName },
            type: 'POST',
            dataType: 'json',
            success: function (response) {
                debugger;

                if (response.result == "EmptyResult") {
                    window.location.href = response.url;
                }
                else if (response.result == "UnExpectedStatusCode") {
                    window.location.href = response.url;
                }
                else if (response.result == "RedirectToException") {
                    window.location.href = response.url;
                }
                else {
                    $('#BId').html('');

                    var options = '<option value="' + 0 + '">' + "--Choose Bank--" + '</option>';

                    for (var i = 0; i < response.length; i++) {

                        options += '<option value="' + response[i].iin + '">' + response[i].bankName + '</option>';

                    }
                    $('#BId').append(options);
                }
            }

        });
    }





    //Commented Code for Tab Link Button of User Input

    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    document.getElementById("defaultOpen").click();

</script>

@*<script>
    //var radioValDevice = $('.morpho:checked').val();
    //GetMFS100Info

    var res = GetMFS100Info();
    if (res.httpStaus) {
        document.getElementById('txtStatus').value = "ErrorCode: " + res.data.ErrorCode + "
        ErrorDescription: " + res.data.ErrorDescription;
        if (res.data.ErrorCode == "0") {
            document.getElementById('tdSerial').innerHTML = res.data.DeviceInfo.SerialNo;
            document.getElementById('tdCertification').innerHTML = res.data.DeviceInfo.Certificate;
            document.getElementById('tdMake').innerHTML = res.data.DeviceInfo.Make;
            document.getElementById('tdModel').innerHTML = res.data.DeviceInfo.Model;
            document.getElementById('tdWidth').innerHTML = res.data.DeviceInfo.Width;
            document.getElementById('tdHeight').innerHTML = res.data.DeviceInfo.Height;
            document.getElementById('tdLocalMac').innerHTML = res.data.DeviceInfo.LocalMac;
            document.getElementById('tdLocalIP').innerHTML = res.data.DeviceInfo.LocalIP;
            document.getElementById('tdSystemID').innerHTML = res.data.DeviceInfo.SystemID;
            document.getElementById('tdPublicIP').innerHTML = res.data.DeviceInfo.PublicIP;
        }
    }
    else {
        alert(res.err);
    }

    // GetMFS100KeyInfo

    var res = GetMFS100Info(String Key); // Base64Encoded Key is for locked sensor
    if (res.httpStaus) {
        document.getElementById('txtStatus').value = "ErrorCode: " + res.data.ErrorCode + "
        ErrorDescription: " + res.data.ErrorDescription;
        if (res.data.ErrorCode == "0") {
            document.getElementById('tdSerial').innerHTML = res.data.DeviceInfo.SerialNo;
            document.getElementById('tdCertification').innerHTML = res.data.DeviceInfo.Certificate;
            document.getElementById('tdMake').innerHTML = res.data.DeviceInfo.Make;
            document.getElementById('tdModel').innerHTML = res.data.DeviceInfo.Model;
            document.getElementById('tdWidth').innerHTML = res.data.DeviceInfo.Width;
            document.getElementById('tdHeight').innerHTML = res.data.DeviceInfo.Height;
            document.getElementById('tdLocalMac').innerHTML = res.data.DeviceInfo.LocalMac;
            document.getElementById('tdLocalIP').innerHTML = res.data.DeviceInfo.LocalIP;
            document.getElementById('tdSystemID').innerHTML = res.data.DeviceInfo.SystemID;
            document.getElementById('tdPublicIP').innerHTML = res.data.DeviceInfo.PublicIP;
        }
    }
    else {
        alert(res.err);
    }

    // CaptureFinger(int quality, int timeout)

    var quality = 60; //(1 to 100) (recommended minimum 55)
    var timeout = 10; // seconds (minimum=10(recommended), maximum=60, unlimited=0)
    var res = CaptureFinger(quality, timeout);
    if (res.httpStaus) {
        document.getElementById('txtStatus').value = "ErrorCode: " + res.data.ErrorCode + "
        ErrorDescription: " + res.data.ErrorDescription;
        if (res.data.ErrorCode == "0") {
            document.getElementById('imgFinger').src = "data:image/bmp;base64," + res.data.BitmapData;
            var imageinfo = "Quality: " + res.data.Quality + " Nfiq: " + res.data.Nfiq + " W(in):
            " + res.data.InWidth + " H(in): " + res.data.InHeight + " area(in): " +
            res.data.InArea + " Resolution: " + res.data.Resolution + " GrayScale: " + res.data.GrayScale + " Bpp: " + res.data.Bpp + " WSQCompressRatio: " + res.data.WSQCompressRatio;
            document.getElementById('txtImageInfo').value = imageinfo;
            document.getElementById('txtIsoTemplate').value = res.data.IsoTemplate;
            document.getElementById('txtAnsiTemplate').value = res.data.AnsiTemplate;
            document.getElementById('txtIsoImage').value = res.data.IsoImage;
            document.getElementById('txtRawData').value = res.data.RawData;
            document.getElementById('txtWsqData').value = res.data.WsqImage;
        }
    }
    else {
        alert(res.err);
    }

    // CaptureMultiFinger(int quality, int timeout, int nooffinger)

    var quality = 60; //(1 to 100) (recommended minimum 55)
    var timeout = 10; // seconds (minimum=10(recommended), maximum=60, unlimited=0)
    var nooffinger = 2; // //(1 to 10) (recommended minimum 2)
    var res = CaptureMultiFinger(quality, timeout, nooffinger);

    if (res.httpStaus) {
        document.getElementById('txtStatus').value = "ErrorCode: " +
            res.data.ErrorCode + " ErrorDescription: " + res.data.ErrorDescription;
        if (res.data.ErrorCode == "0") {

            document.getElementById('txtIsoTemplate').value =
                res.data.IsoTemplate;

        }
    }
    else {
        alert(res.err);
    }

    //  VerifyFinger(string isotemplate1, string isotemplate2)

    varprobTemplate = document.getElementById('txtIsoTemplate1').value;
    vargalleryTemplate = document.getElementById('txtIsoTemplate2').value;
    var res = VerifyFinger(probTemplate, galleryTemplate);
    // you can pass multiple Template upto maximum 10 by comma separated in galleryTemplate parameter
    if (res.httpStaus) {
        if (res.data.Status) {
            alert("Finger matched");
        }
        else {
            if (res.data.ErrorCode != "0") {
                alert(res.data.ErrorDescription);
            }
            else {
                alert("Finger not matched");
            }
        }
    }
    else {
        alert(res.err);
    }

    // MatchFinger(int quality,int timeout, string isotemplate)

    var quality = 60; //(1 to 100) (recommended minimum 55)
    var timeout = 10; // seconds (minimum=10(recommended), maximum=60, unlimited=0)
    var galleryTemplate = document.getElementById('txtIsoTemplate').value;
    var res = MatchFinger(quality, timeout, galleryTemplate);
    // you can pass multiple Template upto maximum 10 by comma separated in galleryTemplate parameter

    if (res.httpStaus) {
        if (res.data.Status) {
            alert("Finger matched");
        }
        else {
            if (res.data.ErrorCode != "0") {
                alert(res.data.ErrorDescription);
            }
            else {
                alert("Finger not matched");
            }
        }
    }
    else {
        alert(res.err);
    }

    // Biometric Class

    Biometric(BioType, BiometricData, Pos, Nfiq, Na) {
        this.BioType = BioType;//Valid values “FMR”, “FIR” and “IIR”
        this.BiometricData = BiometricData;//Base64Encoded string of biometric data
        this.Pos = Pos;//Valid values as per UIDAI Specification
        this.Nfiq = Nfiq; // Valid values as per UIDAI Specification. It must be 1 or 2
        this.Na = Na; //Valid values as per UIDAI Specification. It must be 1, 2, 3
    }

</script>*@

<script type="text/javascript">
    var uri = "https://localhost:8003/mfs100/"; //Secure
    //var uri = "http://localhost:8004/mfs100/"; //Non-Secure



    function GetMFS100Info() {
        debugger;
        return GetMFS100Client("info");
    }

    function GetMFS100KeyInfo(key) {
        debugger;
        var MFS100Request = {
            "Key": key,
        };
        var jsondata = JSON.stringify(MFS100Request);
        return PostMFS100Client("keyinfo", jsondata);
    }

    //Quality between 0 to 100
    //Timeout between 0 to 60 count in seconds

    function CaptureFinger(quality, timeout) {
        debugger;
        var MFS100Request = {
            "Quality": quality,
            "TimeOut": timeout
        };
        //geolocate();
        var jsondata = JSON.stringify(MFS100Request);
        return PostMFS100Client("capture", jsondata);
    }

    // Devyang Muti Finger Capture
    function CaptureMultiFinger(quality, timeout, nooffinger) {
        debugger;
        var MFS100Request = {
            "Quality": quality,
            "TimeOut": timeout,
            "NoOfFinger": nooffinger
        };
        var jsondata = JSON.stringify(MFS100Request);
        return PostMFS100Client("capturewithdeduplicate", jsondata);
    }
    //

    function VerifyFinger(ProbFMR, GalleryFMR) {
        debugger;
        var MFS100Request = {
            "ProbTemplate": ProbFMR,
            "GalleryTemplate": GalleryFMR,
            "BioType": "FMR" // you can paas here BioType as "ANSI" if you are using ANSI Template
        };
        var jsondata = JSON.stringify(MFS100Request);
        return PostMFS100Client("verify", jsondata);
    }

    function MatchFinger(quality, timeout, GalleryFMR) {
        debugger;
        var MFS100Request = {
            "Quality": quality,
            "TimeOut": timeout,
            "GalleryTemplate": GalleryFMR,
            "BioType": "FMR" // you can paas here BioType as "ANSI" if you are using ANSI Template
        };
        var jsondata = JSON.stringify(MFS100Request);
        return PostMFS100Client("match", jsondata);
    }
    function GetPidData(BiometricArray) {
        debugger;
        var req = new MFS100Request(BiometricArray);
        var jsondata = JSON.stringify(req);
        return PostMFS100Client("getpiddata", jsondata);
    }

    function GetRbdData(BiometricArray) {
        debugger;
        var req = new MFS100Request(BiometricArray);
        var jsondata = JSON.stringify(req);
        return PostMFS100Client("getrbddata", jsondata);
    }

    function PostMFS100Client(method, jsonData) {
        debugger;
        var res;
        $.support.cors = true;
        var httpStaus = false;

        $.ajax({
            type: "POST",
            async: false,
            crossDomain: true,
            url: uri + method,
            contentType: "application/json; charset=utf-8",
            data: jsonData,
            dataType: "json",
            processData: false,
            success: function (data) {
                debugger;
                httpStaus = true;
                res = { 'httpStaus': httpStaus, 'data': data };
                var Result = {
                    AnsiTemplate: data.AnsiTemplate,
                    BitmapData: data.BitmapData,
                    Bpp: data.Bpp,
                    ErrorCode: data.ErrorCode,
                    ErrorDescription: data.ErrorCode,
                    GrayScale: data.GrayScale,
                    InArea: data.InArea,
                    InHeight: data.InHeight,
                    InWidth: data.InWidth,
                    IsoImage: data.IsoImage,
                    IsoTemplate: data.IsoTemplate,
                    Nfiq: data.Nfiq,
                    Quality: data.Quality,
                    RawData: data.RawData,
                    Resolution: data.Resolution,
                    WSQCompressRatio: data.WSQCompressRatio,
                    WSQInfo: data.WSQInfo,
                    WsqImage: data.WsqImage
                }

                //GetPidData("MjAyMi0xMi0yM1QxMjoyMjo0NgqSnaKWAqMT/zZX4z5IyXpROmX20TXfEteXppabb0PipOZabnhSet6AWQlvT58x3uD1sqtjQXV1CNJPKSWuizEml/UT2i9NwLxOFX0fwbEYWCER+IKhcUYPD0wFVV9OcSj6l/R1jE9lc5A2s2OBkwLnZ9ZQrw2E8YM5bO3+La9kGUzKjtwasjK3Y9r8lTcy8oV5i2siZpObXIBGOrRDbOIyYk1VXAzBkJlU36CTX0wfEWfm5oToaKgYKS00KMFDQnpmCJ5lL+25v/Q88kL/0UqGPdRHnjwFwSwzCnfP0YhSfFU1SEkQQIvlZFcJ5EDjJ/V+NfJhS9IjvhshRU4Mt9StyiFBiHFgsesdgM4Ps7S2S3yW67F2Z0Yf8z6XtdPfhGcw/8HZjyoRyLj1MU6E5RFjTYt0ItHj1eT3ISQm4A7uU8w9IGlYdfgDWdnGdoKITGiMNBTbphfOu/nKpGCc7bn+l7aWVxxF7oEQo/HLqA20QljKzRkr8bZZuCI5CBBn3L277+kjASk9IXB3Kfs06zze+WGgkS46AyqlU8/FsN8iO991E2QVv0Ep0se2CqjhxBjQTYfIvDnS6V154zOL3hSlHUsv2Y14rbCv3Oiow5fhlSKsIsMgN/DwT/I6AIP3QtyzsCXZP0yHuVMpgJHrVuGf7rDWzCHup3Upmgo65wV7KLd5wjtv0WrVJ5pgfHBlQM1M6q/hZ+ZYoTQOWxELaCnKc3fiX5kaXXSX6exmLvqo8mMuvlV6bqn6mCem18xZ9FB6xcE9mrWQo42vfQqBy5cOTTfrYuFtriFHKmcgn+jYKKJDQL4WunLZXHBD3bwE/i8QWN/Rl+P6AJt+hk/A6mlHwzIsaODy+/Ezo5zGSxoq5jvjAukDacSjoGrNVtU+pB/yfAnpZkCG0Tk6bY1pd3joZfeZAc42ciN3jRqMcYWg6vE0kwpHMRURX4qczL9851hWpYSAZxCFDIQY81j+cHbqIeboWEgZ9lW3I3eE1ERtjGCCLHh0pm5cnu8I4TpWp5IglcocLMYmEFFk3ZZ65siAeZ0/YsRhokwHnsSSYyrXexevF2RjPi13c348CtM4PszlxbxjWBDWA/ZN4NDt72OMkqpxfY4jO2ygVFDh7SPCPdhRK1/GUILUqo9GVAtupIaVwiGBdQqSvSw14DWF1ww+ewLsRw2bURqYXU6mMq7McRVezF5R09xz4MQxovut/VuADfJFSc7lEHR3oQ==");                //GetPidData("MjAyMi0xMi0yM1QxMjoyMjo0NgqSnaKWAqMT/zZX4z5IyXpROmX20TXfEteXppabb0PipOZabnhSet6AWQlvT58x3uD1sqtjQXV1CNJPKSWuizEml/UT2i9NwLxOFX0fwbEYWCER+IKhcUYPD0wFVV9OcSj6l/R1jE9lc5A2s2OBkwLnZ9ZQrw2E8YM5bO3+La9kGUzKjtwasjK3Y9r8lTcy8oV5i2siZpObXIBGOrRDbOIyYk1VXAzBkJlU36CTX0wfEWfm5oToaKgYKS00KMFDQnpmCJ5lL+25v/Q88kL/0UqGPdRHnjwFwSwzCnfP0YhSfFU1SEkQQIvlZFcJ5EDjJ/V+NfJhS9IjvhshRU4Mt9StyiFBiHFgsesdgM4Ps7S2S3yW67F2Z0Yf8z6XtdPfhGcw/8HZjyoRyLj1MU6E5RFjTYt0ItHj1eT3ISQm4A7uU8w9IGlYdfgDWdnGdoKITGiMNBTbphfOu/nKpGCc7bn+l7aWVxxF7oEQo/HLqA20QljKzRkr8bZZuCI5CBBn3L277+kjASk9IXB3Kfs06zze+WGgkS46AyqlU8/FsN8iO991E2QVv0Ep0se2CqjhxBjQTYfIvDnS6V154zOL3hSlHUsv2Y14rbCv3Oiow5fhlSKsIsMgN/DwT/I6AIP3QtyzsCXZP0yHuVMpgJHrVuGf7rDWzCHup3Upmgo65wV7KLd5wjtv0WrVJ5pgfHBlQM1M6q/hZ+ZYoTQOWxELaCnKc3fiX5kaXXSX6exmLvqo8mMuvlV6bqn6mCem18xZ9FB6xcE9mrWQo42vfQqBy5cOTTfrYuFtriFHKmcgn+jYKKJDQL4WunLZXHBD3bwE/i8QWN/Rl+P6AJt+hk/A6mlHwzIsaODy+/Ezo5zGSxoq5jvjAukDacSjoGrNVtU+pB/yfAnpZkCG0Tk6bY1pd3joZfeZAc42ciN3jRqMcYWg6vE0kwpHMRURX4qczL9851hWpYSAZxCFDIQY81j+cHbqIeboWEgZ9lW3I3eE1ERtjGCCLHh0pm5cnu8I4TpWp5IglcocLMYmEFFk3ZZ65siAeZ0/YsRhokwHnsSSYyrXexevF2RjPi13c348CtM4PszlxbxjWBDWA/ZN4NDt72OMkqpxfY4jO2ygVFDh7SPCPdhRK1/GUILUqo9GVAtupIaVwiGBdQqSvSw14DWF1ww+ewLsRw2bURqYXU6mMq7McRVezF5R09xz4MQxovut/VuADfJFSc7lEHR3oQ==");
                GetPidData(Result);
                var radioValDevice = $('.morpho:checked').val();
                debugger;
                $.ajax({
                    type: "POST",
                    url: "/Aeps/fingurprintBiometric",
                    data: { Result, radioValDevice, demo },
                    dataType: 'json',
                    success: function (msgdeserialize) {

                    },
                    failure: function (response) {
                        alert(response.responseText);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });



            },
            error: function (jqXHR, ajaxOptions, thrownError) {
                res = { httpStaus: httpStaus, err: getHttpError(jqXHR) };
            },
        });
        //alert(res);
        return res;
    }
    function GetMFS100Client(method) {
        debugger;
        var res;
        $.support.cors = true;
        var httpStaus = false;
        $.ajax({
            type: "GET",
            async: false,
            crossDomain: true,
            url: uri + method,
            contentType: "application/json; charset=utf-8",
            processData: false,
            success: function (data) {
                httpStaus = true;
                res = { httpStaus: httpStaus, data: data };
            },
            error: function (jqXHR, ajaxOptions, thrownError) {
                res = { httpStaus: httpStaus, err: getHttpError(jqXHR) };
            },
        });
        return res;
    }
    function getHttpError(jqXHR) {
        debugger;
        var err = "Unhandled Exception";
        if (jqXHR.status === 0) {
            err = 'Service Unavailable';
        } else if (jqXHR.status == 404) {
            err = 'Requested page not found';
        } else if (jqXHR.status == 500) {
            err = 'Internal Server Error';
        } else if (thrownError === 'parsererror') {
            err = 'Requested JSON parse failed';
        } else if (thrownError === 'timeout') {
            err = 'Time out error';
        } else if (thrownError === 'abort') {
            err = 'Ajax request aborted';
        } else {
            err = 'Unhandled Error';
        }
        return err;
    }


    /////////// Classes

    function Biometric(BioType, BiometricData, Pos, Nfiq, Na) {
        debugger;
        this.BioType = BioType;
        this.BiometricData = BiometricData;
        this.Pos = Pos;
        this.Nfiq = Nfiq;
        this.Na = Na;
    }

    function MFS100Request(BiometricArray) {
        debugger;
        this.Biometrics = BiometricArray;
    }
</script>
<script>
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        $("#hdnLong").val(position.coords.longitude);
        $("#hdnLat").val(position.coords.latitude);
        fingurprintBiometric();
    }

    function fingurprintBiometric() {
        var radioValDevice = $('.morpho:checked').val();
        var lat = $("#hdnLat").val();
        var longt = $("#hdnLong").val();
        debugger;
        $.ajax({
            url: "/Aeps/fingurprintBiometric",
            data: { 'radioValDevice': radioValDevice, 'lat': lat, 'longt': longt },
            type: 'POST',
            dataType: 'json',
            success: function (response) {
                if (response.result == "NotConnected") {
                    $("#btndeviceNotConnected").trigger("click");
                    $("#VerifyFaceBiometricModal").hide();
                }
                debugger;
            }
        });
    }
    //function getLocation() {
    //    debugger;
    //    if (navigator.geolocation) {
    //        navigator.geolocation.getCurrentPosition(showPosition);
    //    } else {
    //        alert("Geolocation is not supported by this browser.");
    //    }
    //}

    //function showPosition(position) {
    //    debugger;
    //    $("#hdnLat").val(position.coords.latitude);
    //    $("#hdnLong").val(position.coords.longitude);
    //}
</script>
<script>
    $(document).ready(function () {
        var myValue = $('#SlefHelpElement').val(); // Get the value of an input field with ID 'myElement'
        Aeps(myValue); // Pass the value to a function called 'myFunction'
    });

    function Aeps(e) {
        // code
        var ServiceId = e;
        $.ajax({
            url: "/DMT2/SelfHelp",
            data: { 'ServiceId': ServiceId },
            type: 'POST',
            dataType: 'json',
            success: function (data) {
                debugger;
                for (var i = 0; i < data.length; i++) {
                    $(".Self_help").append('<div class="controls">\
                                                                                <details>\<summary>'+ data[i].question + '</summary><p>' + data[i].answer + '<p></details></div>');

                }
            }

        });
    }
    $(function () {
        $("#txtAmountCashWithdrawal").keyup(function (e) {
            var customerAmount = $("#txtAmountCashWithdrawal").val();
            if (customerAmount < 100 || customerAmount > 10000) {
                $("#errtxtAmountCashWithdrawal").html("Please insert amount between 100 to 10000 Rupees.");
            }
        });
    });

                                                    //function ValidateAlphanumericsrAccount(e) {
                                                    //    var keyCode = e.keyCode || e.which;
                                                    //    var errtxtAmountCashWithdrawal=document.getElementById("errtxtAmountCashWithdrawal");
                                                    //    var Amount = document.getElementById("txtAmountCashWithdrawal");
                                                    //    errtxtAmountCashWithdrawal.innerHTML = "";
                                                    //    var regex = /^[0-9]+$/;
                                                    //    var isValid = regex.test(String.fromCharCode(keyCode));
                                                    //    if (!isValid) {

                                                    //        errtxtAmountCashWithdrawal.innerHTML = "Only Numbers allowed.";
                                                    //        $('#errtxtAmountCashWithdrawal').css('margin-left', '-109px');
                                                    //        $('#errtxtAmountCashWithdrawal').css('color', 'red');

                                                    //    }
                                                    //    else {
                                                    //        errtxtAmountCashWithdrawal.innerHTML = "";
                                                    //    }
                                                    //    return isValid;
                                                    //}

</script>